(window.webpackJsonp=window.webpackJsonp||[]).push([[34,35],{349:function(t,e,n){"use strict";e.a=[{value:"alexandria",label:"الإسكندرية"},{value:"ismailia",label:"الإسماعيلية"},{value:"aswan",label:"أسوان"},{value:"asyut",label:"أسيوط"},{value:"luxor",label:"الأقصر"},{value:"red sea",label:"البحر الأحمر"},{value:"el beheira",label:"البحيرة"},{value:"beni suef",label:"بني سويف"},{value:"port said",label:"بورسعيد"},{value:"south sinai",label:"جنوب سيناء"},{value:"giza",label:"الجيزة"},{value:"dakahlia",label:"الدقهلية"},{value:"damietta",label:"دمياط"},{value:"sohag",label:"سوهاج"},{value:"suez",label:"السويس"},{value:"ash sharqia",label:"الشرقية"},{value:"north sinai",label:"شمال سيناء"},{value:"gharbia",label:"الغربية"},{value:"faiyum",label:"الفيوم"},{value:"cairo",label:"القاهرة"},{value:"al qalyubia",label:"القليوبية"},{value:"qena",label:"قنا"},{value:"kafr el sheikh",label:"كفر الشيخ"},{value:"marsa matruh",label:"مرسى مطروح"},{value:"menofia",label:"المنوفية"},{value:"minya",label:"المنيا"},{value:"new valley",label:"الوادي الجديد"}]},354:function(t,e,n){var r=n(12),meta=n(194).onFreeze;n(195)("freeze",(function(t){return function(e){return t&&r(e)?t(meta(e)):e}}))},359:function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",(function(){return r}))},506:function(t,e,n){"use strict";var r=n(515),l=n.n(r),o={props:{images:{type:Array},rebuild:{type:Boolean,default:!1},trigger:{},options:{type:Object}},data:function(){return{}},computed:{},methods:{onChange:function(){this.rebuild?this.rebuildViewer():this.updateViewer()},rebuildViewer:function(){this.destroyViewer(),this.createViewer()},updateViewer:function(){this.$viewer?(this.$viewer.update(),this.$emit("inited",this.$viewer)):this.createViewer()},destroyViewer:function(){this.$viewer&&this.$viewer.destroy()},createViewer:function(){this.$viewer=new l.a(this.$el,this.options),this.$emit("inited",this.$viewer)}},watch:{images:function(){var t=this;this.$nextTick((function(){t.onChange()}))},trigger:{handler:function(){var t=this;this.$nextTick((function(){t.onChange()}))},deep:!0},options:{handler:function(){var t=this;this.$nextTick((function(){t.rebuildViewer()}))},deep:!0}},mounted:function(){this.createViewer()},destroyed:function(){this.destroyViewer()}},c=n(2),component=Object(c.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default",null,{images:this.images,options:this.options})],2)}),[],!1,null,null,null);e.a=component.exports},588:function(t,e,n){var map={"./air_conditioning.svg":523,"./bathroom.svg":524,"./bathtub.svg":525,"./bed.svg":526,"./butane.svg":527,"./closet.svg":528,"./coffe_machine.svg":529,"./desk.svg":530,"./dishwasher.svg":531,"./fridge.svg":532,"./garage.svg":533,"./heater.svg":534,"./microwave.svg":535,"./tv.svg":536,"./washing_machine.svg":537,"./wifi.svg":538};function r(t){var e=l(t);return n(e)}function l(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=l,t.exports=r,r.id=588},592:function(t,e,n){"use strict";n.r(e);n(57);var r,l,o,c=n(6),d=n(351),v=n.n(d),_=n(9),f=(n(358),{data:function(){return{unAvailableTimes:[],data:{date:"",code:""},form:{date1:"",date2:"",code:""},validRangeTime:!1,rate:3,Toast:v.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}},created:(o=Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(_.b)(),t.next=3,this.loadData(!0);case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),methods:{reserveNow:(l=Object(c.a)(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.validRangeTime){t.next=4;break}this.Toast.fire({icon:"error",title:"من فضلك اختر فترة زمنية غير مشغولة"}),t.next=17;break;case 4:return e=+this.data.date[0],n=+this.data.date[1],t.prev=6,t.next=9,_.a.post("unit-reservation/reservation/",{from:e,to:n,unit:this.$route.params.id});case 9:t.sent.data&&(this.Toast.fire({icon:"success",title:"تم حجز الوحدة بنحاج"}),this.$route.push("/units")),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),this.Toast.fire({icon:"error",title:"خطأ في حجز الوحدة"}),this.$route.push("/units");case 17:case"end":return t.stop()}}),t,this,[[6,13]])}))),function(){return l.apply(this,arguments)}),changeValue:function(t){for(var e=+t[0],n=+t[1],r=!0,i=0;i<this.unAvailableTimes.length;i++){var time=this.unAvailableTimes[i];if(e<time.to&&time.from<n){r=!1;break}}this.validRangeTime=r},disabledDate:function(time){var t=this.unAvailableTimes,e=!0,n=time.getTime();if(n<+new Date)return!0;for(var i=0;i<t.length;i++){var r=t[i];if(!(n<r.from||n>r.to)){e=!1;break}}return!e},loadData:(r=Object(c.a)(regeneratorRuntime.mark((function t(){var path,e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,path="unit-reservation/reservation/un-available-times/".concat(this.$route.params.id),t.next=4,_.a.get(path);case 4:e=t.sent,this.unAvailableTimes=e.data.result,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(){return r.apply(this,arguments)})}}),m=n(2),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"unit-details__form"},[n("el-form",{ref:"form",attrs:{model:t.form}},[n("el-form-item",[n("el-date-picker",{attrs:{"picker-options":{disabledDate:t.disabledDate},type:"daterange","range-separator":"","start-placeholder":"بدأ الحجز  من","end-placeholder":"الحجز الي"},on:{change:t.changeValue},model:{value:t.data.date,callback:function(e){t.$set(t.data,"date",e)},expression:"data.date"}})],1),t._v(" "),n("el-form-item",[n("el-input",{attrs:{placeholder:"كود الخصم (ان وجد)"},model:{value:t.data.code,callback:function(e){t.$set(t.data,"code",e)},expression:"data.code"}})],1),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.reserveNow}},[t._v("احجز الان")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},705:function(t,e,n){"use strict";n.r(e);var r,l,o,c,d=n(359),v=(n(57),n(6)),component=(n(514),n(506)),_=n(351),f=n.n(_),m=n(9),h=n(353),w=n(489),C=n(349),k=n(508),x=n(592),y=(n(358),{components:{unitCard:k.a,ReservationForm:x.default,Viewer:component.a},data:function(){return{RoomImages:[],fullscreenLoading:!1,Options:{inline:!1,button:!0,navbar:!0,title:!1,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!0,keyboard:!0,url:"data-source"},unitId:this.$route.params.id,loading:!1,unAvailableTimes:[{from:15850872e5,to:15855192e5}],validRangeTime:!1,rate:3,Toast:f.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),addFavs:!1}},asyncData:(c=Object(v.a)(regeneratorRuntime.mark((function t(e){var n,r,l,path,o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.params,r=e.redirect,l=e.app,t.prev=1,Object(m.b)(l.$cookies.get("sknToken")),path="units/unit/".concat(n.id),t.next=6,m.a.get(path);case 6:if(o=t.sent,data=o.data){t.next=10;break}return t.abrupt("return",{unit:{},error:"unable to find unit"});case 10:return t.abrupt("return",{unit:Object(w.c)(data.unit,C.a)});case 13:t.prev=13,t.t0=t.catch(1),r("/units");case 16:case"end":return t.stop()}}),t,null,[[1,13]])}))),function(t){return c.apply(this,arguments)}),methods:{getProperLanguage:h.c,getServiceText:w.a,inited:function(t){this.$viewer=t},show:function(){var t=this;this.RoomImages=[],this.fullscreenLoading=!0,setTimeout((function(){var e;t.RoomImages.push(t.unit.image),(e=t.RoomImages).push.apply(e,Object(d.a)(t.unit.gallery)),console.log(t.RoomImages),t.$viewer.show(),t.fullscreenLoading=!1}),2e3)},addFav:(o=Object(v.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.updating){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.updateFavorite("post",e);case 4:t.sent.success&&(this.unit.favorite=!this.unit.favorite);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)}),removeFav:(l=Object(v.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.updating){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.updateFavorite("delete",e);case 4:t.sent.success&&(this.unit.favorite=!this.unit.favorite);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)}),updateFavorite:(r=Object(v.a)(regeneratorRuntime.mark((function t(e,n,r){var path,l,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.updating=!0,path="users/favorite/units/".concat(n),l="delete"===e?e:"post",t.next=6,m.a[l](path);case 6:return o=t.sent,this.updating=!1,t.abrupt("return",{success:!0,message:o.data.message});case 11:return t.prev=11,t.t0=t.catch(0),this.updating=!1,h.a&&h.a.fire({icon:"error",title:t.t0.response.data.message}),t.abrupt("return",{});case 16:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(t,e,n){return r.apply(this,arguments)})}}),R=n(2),O=Object(R.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"unit-details u-container"},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{xs:24,sm:24,md:7,lg:6,xl:6}},[t.unit.available?r("div",{staticClass:"skn-alert"},[r("img",{attrs:{src:n(352),alt:"info"}}),t._v(" "),r("p",[t._v("هذا المسكن "+t._s(t.unit.available?"":"غير")+" متاح للحجز")])]):t._e(),t._v(" "),r("ReservationForm"),t._v(" "),r("div",{staticClass:"unit-details__condations"},[r("div",{staticClass:"unit-details__condations-title"},[t._v("شروط مالك الوحدة")]),t._v(" "),r("ul",{staticClass:"unit-details__condations-list"},t._l(t.unit.conditions,(function(e,n){return r("li",{key:"condition"+n},[t._v("\n            "+t._s(e)+"\n          ")])})),0)])],1),t._v(" "),r("el-col",{attrs:{xs:24,sm:24,md:17,lg:18,xl:18}},[r("div",{staticClass:"unit-details__carousel"},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{xs:24,sm:24,md:17,lg:18,xl:18}},[r("div",{staticClass:"unit-details__horizontal-carousel"},[r("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"el-carousel__item",style:{backgroundImage:"url("+t.unit.image+")"},on:{click:t.show}})])]),t._v(" "),r("el-col",{attrs:{xs:24,sm:24,md:7,lg:6,xl:6}},[r("div",{staticClass:"unit-details__vertical-carousel"},t._l(t.unit.gallery,(function(image,e){return r("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],key:e+"image",staticClass:"el-carousel__item",style:{backgroundImage:"url("+image+")"},on:{click:t.show}})})),0)])],1)],1),t._v(" "),r("div",{staticClass:"unit-details__header"},[r("div",{staticClass:"unit-details__price"},[r("span",[r("i",{staticClass:"el-icon-warning-outline"}),t._v(" ج.م/"+t._s(t.unit.dailyOrMonthly)+"\n          ")]),t._v("\n          "+t._s(t.unit.pricePerPerson)+"\n        ")]),t._v(" "),r("div",{staticClass:"unit-details__header-actions"},[r("div",{staticClass:"unit-details__share"},[r("img",{attrs:{src:n(539),alt:""}})]),t._v(" "),t.unit.displayFavorite?r("div",{staticClass:"unit-details__like",on:{click:function(e){t.unit.favorite?t.removeFav(t.unit._id):t.addFav(t.unit._id)}}},[t.unit.favorite?t._e():r("img",{attrs:{src:n(522),alt:""}}),t._v(" "),t.unit.favorite?r("img",{attrs:{src:n(494),alt:""}}):t._e()]):t._e()]),t._v(" "),r("div",{staticClass:"unit-details__header-title"},[t._v("\n          "+t._s(t.unit.address.street)+"\n          "),r("span",{staticClass:"unit-details__header-city"},[t._v("\n            ,"+t._s(t.unit.address.government)+"\n          ")])])]),t._v(" "),r("div",{staticClass:"unit-details__rate"},[r("div",{staticClass:"unit-details__rate-users"},[r("span",[t._v(t._s(t.unit.totalUsersRated))]),t._v(" "),r("span",{staticClass:"word"},[t._v(" مستخدم ")])]),t._v(" "),r("div",{staticClass:"rate"},[r("el-rate",{attrs:{disabled:"","text-color":"#ff9900"},model:{value:t.unit.rate,callback:function(e){t.$set(t.unit,"rate",e)},expression:"unit.rate"}})],1)]),t._v(" "),t.unit.alert?r("div",{staticClass:"unit-details__alert"},[r("div",{staticClass:"skn-alert"},[r("img",{attrs:{src:n(352),alt:"info"}}),t._v(" "),r("p",[t._v("\n            "+t._s(t.unit.alert||"")+"\n          ")])])]):t._e(),t._v(" "),r("div",{staticClass:"unit-details__discretion"},[r("h4",{staticClass:"unit-details__title"},[t._v("وصف السكن")]),t._v(" "),r("p",[t._v("\n          "+t._s(t.unit.description)+"\n        ")])]),t._v(" "),r("div",{staticClass:"unit-details__contain"},[r("h4",{staticClass:"unit-details__title"},[t._v("محتويات السكن")]),t._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"unit-card__feature"},[r("img",{staticClass:"unit-card__feature-img",attrs:{src:n(492),alt:""}}),t._v(" "),r("div",{staticClass:"unit-card__feature-name"},[r("span",[t._v(t._s(t.unit.availableCountNow))]),t._v(" متاح\n              ")])])]),t._v(" "),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"unit-card__feature"},[r("img",{staticClass:"unit-card__feature-img",attrs:{src:n(493),alt:""}}),t._v(" "),r("div",{staticClass:"unit-card__feature-name"},[r("span",[t._v(t._s(t.unit.numberOfRooms))]),t._v("\n                "+t._s(t.getProperLanguage("rooms",t.unit.numberOfRooms))+"\n              ")])])]),t._v(" "),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"unit-card__feature"},[r("img",{staticClass:"unit-card__feature-img",attrs:{src:n(542),alt:""}}),t._v(" "),r("div",{staticClass:"unit-card__feature-name"},[r("span",[t._v(t._s(t.unit.numberOfPeople))]),t._v("\n                "+t._s(t.getProperLanguage("people",t.unit.numberOfPeople))+"\n              ")])])]),t._v(" "),r("el-col",{attrs:{span:8}},[t._v("\n             \n          ")]),t._v(" "),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"unit-card__feature"},[r("img",{staticClass:"unit-card__feature-img",attrs:{src:n(589)("./"+(t.unit.rentersIcon||"boys")+".svg"),alt:""}}),t._v(" "),r("div",{staticClass:"unit-card__feature-name"},[t._v("\n                "+t._s(t.unit.rentersType)+"\n              ")])])]),t._v(" "),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"unit-card__feature"},[r("img",{staticClass:"unit-card__feature-img",attrs:{src:n(550),alt:""}}),t._v(" "),r("div",{staticClass:"unit-card__feature-name"},[t._v("مفروش")])])])],1)],1),t._v(" "),r("div",{staticClass:"unit-details__features"},[r("h4",{staticClass:"unit-details__title"},[t._v("مميزات السكن")]),t._v(" "),r("el-row",{attrs:{gutter:20}},t._l(t.unit.services,(function(e,l){return r("el-col",{key:"services"+l,staticClass:"u-col-rtl",attrs:{span:3,xs:6,sm:6,md:3,lg:3,xl:3}},[r("div",{staticClass:"unit-details__feature"},[r("img",{attrs:{src:n(588)("./"+e+".svg"),alt:e}}),t._v(" "),r("h6",[t._v(t._s(t.getServiceText(e)))])])])})),1)],1)])],1),t._v(" "),t.unit.similarUnits&&t.unit.similarUnits.length?r("div",{staticClass:"unit-details__similar"},[r("h4",{staticClass:"unit-details__title"},[t._v("سكن مشابه")]),t._v(" "),r("el-row",{attrs:{gutter:30}},t._l(t.unit.similarUnits,(function(t,e){return r("el-col",{key:"similar"+e,staticClass:"u-col-rtl",attrs:{xs:24,sm:24,md:8,lg:6,xl:6}},[r("unitCard",{attrs:{unit:t,backgroundurl:t.image,"go-to":"/unitDetails/"+t._id,state:"availableRent"}})],1)})),1)],1):t._e(),t._v(" "),r("viewer",{ref:"viewer",staticClass:"viewer",attrs:{options:t.Options,images:t.RoomImages},on:{inited:t.inited},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.images,(function(t){return r("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:t,attrs:{src:t}})}))}}])})],1)}),[],!1,null,null,null);e.default=O.exports}}]);