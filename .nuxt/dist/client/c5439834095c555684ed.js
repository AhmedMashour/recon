(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{739:function(t,e,n){"use strict";n(741),n(51),n(87),n(88),n(18),n(768);var o=n(736),r=n(737),l=n(1);e.a={name:"v-combobox",extends:r.a,props:{delimiters:{type:Array,default:function(){return[]}},returnObject:{type:Boolean,default:!0}},data:function(){return{editingIndex:-1}},computed:{counterValue:function(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot:function(){return o.a.options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed:function(){return!0},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)}},methods:{onFilteredItemsChanged:function(){},onInternalSearchChanged:function(t){if(t&&this.multiple&&this.delimiters.length){var e=this.delimiters.find(function(e){return t.endsWith(e)});null!=e&&(this.internalSearch=t.slice(0,t.length-e.length),this.updateTags())}this.updateMenuDimensions()},genChipSelection:function(t,e){var n=this,r=o.a.options.methods.genChipSelection.call(this,t,e);return this.multiple&&(r.componentOptions.listeners.dblclick=function(){n.editingIndex=e,n.internalSearch=n.getText(t),n.selectedIndex=-1}),r},onChipInput:function(t){o.a.options.methods.onChipInput.call(this,t),this.editingIndex=-1},onEnterDown:function(t){t.preventDefault(),o.a.options.methods.onEnterDown.call(this),this.getMenuIndex()>-1||this.updateSelf()},onKeyDown:function(t){var e=t.keyCode;o.a.options.methods.onKeyDown.call(this,t),this.multiple&&e===l.q.left&&0===this.$refs.input.selectionStart&&this.updateSelf(),this.changeSelectedIndex(e)},onTabDown:function(t){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return t.preventDefault(),t.stopPropagation(),this.updateTags();r.a.options.methods.onTabDown.call(this,t)},selectItem:function(t){this.editingIndex>-1?this.updateEditing():o.a.options.methods.selectItem.call(this,t)},setSelectedItems:function(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.internalSearch;o.a.options.methods.setValue.call(this,t)},updateEditing:function(){var t=this.internalValue.slice();t[this.editingIndex]=this.internalSearch,this.setValue(t),this.editingIndex=-1},updateCombobox:function(){var t=Boolean(this.$scopedSlots.selection)||this.hasChips;t&&!this.searchIsDirty||(this.internalSearch!==this.getText(this.internalValue)&&this.setValue(),t&&(this.internalSearch=void 0))},updateSelf:function(){this.multiple?this.updateTags():this.updateCombobox()},updateTags:function(){var t=this.getMenuIndex();if(!(t<0)||this.searchIsDirty){if(this.editingIndex>-1)return this.updateEditing();var e=this.selectedItems.indexOf(this.internalSearch);if(e>-1){var n=this.internalValue.slice();n.splice(e,1),this.setValue(n)}if(t>-1)return this.internalSearch=null;this.selectItem(this.internalSearch),this.internalSearch=null}}}}},741:function(t,e,n){"use strict";var o=n(19),r=n(54),l=n(201),c="".endsWith;o(o.P+o.F*n(202)("endsWith"),"String",{endsWith:function(t){var e=l(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,o=r(e.length),d=void 0===n?o:Math.min(r(n),o),h=String(t);return c?c.call(e,h,d):e.slice(d-h.length,d)===h}})},748:function(t,e,n){var content=n(749);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(7).default)("08d4b84c",content,!0,{sourceMap:!1})},749:function(t,e,n){(t.exports=n(6)(!1)).push([t.i,".v-form>.container{padding:16px}.v-form>.container>.layout>.flex{padding:8px}.v-form>.container>.layout:only-child{margin:-8px}.v-form>.container>.layout:not(:only-child){margin:auto -8px}",""])},750:function(t,e,n){var content=n(751);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(7).default)("0404d2be",content,!0,{sourceMap:!1})},751:function(t,e,n){(t.exports=n(6)(!1)).push([t.i,'.theme--light.v-overflow-btn .v-input__control:before,.theme--light.v-overflow-btn .v-input__slot:before{background-color:rgba(0,0,0,.12)!important}.theme--light.v-overflow-btn.v-text-field--outline .v-input__control:before,.theme--light.v-overflow-btn.v-text-field--outline .v-input__slot:before{background-color:transparent!important}.theme--light.v-overflow-btn--editable.v-input--is-focused .v-input__append-inner,.theme--light.v-overflow-btn--editable.v-select--is-menu-active .v-input__append-inner,.theme--light.v-overflow-btn--editable:hover .v-input__append-inner,.theme--light.v-overflow-btn--segmented .v-input__append-inner{border-left:1px solid rgba(0,0,0,.12)}.theme--light.v-overflow-btn.v-input--is-focused .v-input__slot,.theme--light.v-overflow-btn.v-select--is-menu-active .v-input__slot,.theme--light.v-overflow-btn:hover .v-input__slot{background:#fff}.theme--dark.v-overflow-btn .v-input__control:before,.theme--dark.v-overflow-btn .v-input__slot:before{background-color:hsla(0,0%,100%,.12)!important}.theme--dark.v-overflow-btn.v-text-field--outline .v-input__control:before,.theme--dark.v-overflow-btn.v-text-field--outline .v-input__slot:before{background-color:transparent!important}.theme--dark.v-overflow-btn--editable.v-input--is-focused .v-input__append-inner,.theme--dark.v-overflow-btn--editable.v-select--is-menu-active .v-input__append-inner,.theme--dark.v-overflow-btn--editable:hover .v-input__append-inner,.theme--dark.v-overflow-btn--segmented .v-input__append-inner{border-left:1px solid hsla(0,0%,100%,.12)}.theme--dark.v-overflow-btn.v-input--is-focused .v-input__slot,.theme--dark.v-overflow-btn.v-select--is-menu-active .v-input__slot,.theme--dark.v-overflow-btn:hover .v-input__slot{background:#424242}.v-overflow-btn{margin-top:12px;padding-top:0}.v-overflow-btn:not(.v-overflow-btn--editable)>.v-input__control>.v-input__slot{cursor:pointer}.v-overflow-btn .v-select__slot{height:48px}.v-overflow-btn .v-select__slot input{margin-left:16px;cursor:pointer}.v-overflow-btn .v-select__selection--comma:first-child{margin-left:16px}.v-overflow-btn .v-input__slot{transition:.3s cubic-bezier(.25,.8,.5,1)}.v-overflow-btn .v-input__slot:after{content:none}.v-overflow-btn .v-label{margin-left:16px;top:calc(50% - 10px)}.v-overflow-btn .v-input__append-inner{width:48px;height:48px;align-self:auto;align-items:center;margin-top:0;padding:0;flex-shrink:0}.v-overflow-btn .v-input__append-outer,.v-overflow-btn .v-input__prepend-outer{margin-top:12px;margin-bottom:12px}.v-overflow-btn .v-input__control:before{height:1px;top:-1px;content:"";left:0;position:absolute;transition:.3s cubic-bezier(.25,.8,.5,1);width:100%}.v-overflow-btn.v-input--is-focused .v-input__slot,.v-overflow-btn.v-select--is-menu-active .v-input__slot{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.v-overflow-btn .v-select__selections{width:0}.v-overflow-btn--segmented .v-select__selections{flex-wrap:nowrap}.v-overflow-btn--segmented .v-select__selections .v-btn{border-radius:0;margin:0 -16px 0 0;height:48px;width:100%}.v-overflow-btn--segmented .v-select__selections .v-btn__content{justify-content:start}.v-overflow-btn--segmented .v-select__selections .v-btn__content:before{background-color:transparent}.v-overflow-btn--editable .v-select__slot input{cursor:text}.v-overflow-btn--editable .v-input__append-inner,.v-overflow-btn--editable .v-input__append-inner *{cursor:pointer}',""])},788:function(t,e,n){"use strict";var o=n(736),r=(n(51),n(750),n(737).a),l=n(50),c=n(203),d=n(15),h=r.extend({name:"v-overflow-btn",props:{segmented:Boolean,editable:Boolean,transition:o.a.options.props.transition},computed:{classes:function(){return Object.assign(r.options.computed.classes.call(this),{"v-overflow-btn":!0,"v-overflow-btn--segmented":this.segmented,"v-overflow-btn--editable":this.editable})},isAnyValueAllowed:function(){return this.editable||r.options.computed.isAnyValueAllowed.call(this)},isSingle:function(){return!0},computedItems:function(){return this.segmented?this.allItems:this.filteredItems},$_menuProps:function(){var t=r.options.computed.$_menuProps.call(this);return t.transition=t.transition||"v-menu-transition",t}},methods:{genSelections:function(){return this.editable?r.options.methods.genSelections.call(this):o.a.options.methods.genSelections.call(this)},genCommaSelection:function(t,e,n){return this.segmented?this.genSegmentedBtn(t):o.a.options.methods.genCommaSelection.call(this,t,e,n)},genInput:function(){var input=l.a.options.methods.genInput.call(this);return input.data.domProps.value=this.editable?this.internalSearch:"",input.data.attrs.readonly=!this.isAnyValueAllowed,input},genLabel:function(){if(this.editable&&this.isFocused)return null;var label=l.a.options.methods.genLabel.call(this);return label?(label.data.style={},label):label},genSegmentedBtn:function(t){var e=this,n=this.getValue(t),o=this.computedItems.find(function(i){return e.getValue(i)===n})||t;return o.text&&o.callback?this.$createElement(c.a,{props:{flat:!0},on:{click:function(t){t.stopPropagation(),o.callback(t)}}},[o.text]):(Object(d.c)("When using 'segmented' prop without a selection slot, items must contain both a text and callback property",this),null)}}}),v=n(739).a,f=n(206),m=n(205);n.d(e,"a",function(){return _});var _={functional:!0,$_wrapperFor:o.a,props:{autocomplete:Boolean,combobox:Boolean,multiple:Boolean,tags:Boolean,editable:Boolean,overflow:Boolean,segmented:Boolean},render:function(t,e){var n=e.props,data=e.data,l=e.slots,c=e.parent;Object(m.a)(data);var w=Object(f.a)(l(),t);return n.autocomplete&&Object(d.d)("<v-select autocomplete>","<v-autocomplete>",_,c),n.combobox&&Object(d.d)("<v-select combobox>","<v-combobox>",_,c),n.tags&&Object(d.d)("<v-select tags>","<v-combobox multiple>",_,c),n.overflow&&Object(d.d)("<v-select overflow>","<v-overflow-btn>",_,c),n.segmented&&Object(d.d)("<v-select segmented>","<v-overflow-btn segmented>",_,c),n.editable&&Object(d.d)("<v-select editable>","<v-overflow-btn editable>",_,c),data.attrs=data.attrs||{},n.combobox||n.tags?(data.attrs.multiple=n.tags,t(v,data,w)):n.autocomplete?(data.attrs.multiple=n.multiple,t(r,data,w)):n.overflow||n.segmented||n.editable?(data.attrs.segmented=n.segmented,data.attrs.editable=n.editable,t(h,data,w)):(data.attrs.multiple=n.multiple,t(o.a,data,w))}};e.b=_},791:function(t,e,n){"use strict";n(51),n(35),n(18),n(204),n(26),n(40),n(748);var o=n(56);e.a={name:"v-form",mixins:[Object(o.b)("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var t=Object.values(this.errorBag).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(input){var t=this,e=function(input){return input.$watch("hasError",function(e){t.$set(t.errorBag,input._uid,e)},{immediate:!0})},n={_uid:input._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?n.shouldValidate=input.$watch("shouldValidate",function(o){o&&(t.errorBag.hasOwnProperty(input._uid)||(n.valid=e(input)))}):n.valid=e(input),n},validate:function(){return!this.inputs.filter(function(input){return!input.validate(!0)}).length},reset:function(){for(var t=this,i=this.inputs.length;i--;)this.inputs[i].reset();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},resetValidation:function(){for(var t=this,i=this.inputs.length;i--;)this.inputs[i].resetValidation();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},register:function(input){var t=this.watchInput(input);this.inputs.push(input),this.watchers.push(t)},unregister:function(input){var t=this.inputs.find(function(i){return i._uid===input._uid});if(t){var e=this.watchers.find(function(i){return i._uid===t._uid});e.valid&&e.valid(),e.shouldValidate&&e.shouldValidate(),this.watchers=this.watchers.filter(function(i){return i._uid!==t._uid}),this.inputs=this.inputs.filter(function(i){return i._uid!==t._uid}),this.$delete(this.errorBag,t._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}}},920:function(t,e,n){"use strict";n.r(e);n(292),n(26),n(40);var o=n(14),r=(n(44),n(11)),l=n(27),c=n(582),d=n(52),h=n(578),v=n.n(h),f=n(579),m={layout:"dashboard",data:function(){var t=this;return{militaryIdLength:13,nationalIdLength:14,recordIdLength:10,defaultPermissions:[],defaultRanks:[],user:{fullName:void 0,username:void 0,password:void 0,permission:[],permissions:[]},disabled:{branch:!1,permissions:!1},rules:{fullName:[function(e){return!!e||t.$t("FullName_Required")},function(e){return t.validateUserName(e)}],username:[function(e){return!!e||t.$t("Username_Required")},function(e){return t.validateUserName(e)}],password:[function(e){return!!e||t.$t("Password_Required")},function(e){return t.validatePassword(e)}]},permissions:[]}},created:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("the component",this),e=this.$store.app.context,(n=e.nuxtState)&&(!n||n.user)){t.next=5;break}return t.abrupt("return");case 5:this.setBranch(n.user);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),middleware:["auth","isNotLoggedIn","isAuthorized"],components:{materialCard:f.a},computed:Object(o.a)({},Object(l.c)({locations:"app/getLocations",defaults:"app/getDefaults",fullname:"user/getFullname"}),{divisionsComputed:function(){var t=this;return this.user.army?this.divisions.filter(function(e){return e.army===t.user.army&&["division"].includes(e.type)}):this.divisions.filter(function(t){return["division"].includes(t.type)})},unitsComputed:function(){var t=this,e=this.divisions.filter(function(t){return["battalion","company"].includes(t.type)});return this.user.divisionId&&(e=this.user.divisionId?e.filter(function(e){return e.divisionId&&e.divisionId._id===t.user.divisionId}):e),!this.user.divisionId&&this.user.army&&(e=e.filter(function(e){return e.army===t.user.army})),e},branchesComputed:function(){}}),methods:{moment:v.a,submit:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$refs.form.validate()){t.next=10;break}return"/users/create-user",t.next=5,Object(d.e)("/users/create-user",this.user);case 5:if(!(e=t.sent).error){t.next=8;break}return t.abrupt("return",c.b.fire({icon:"error",title:e.error,timer:4e3,showConfirmButton:!1}));case 8:c.b.fire({icon:"success",title:this.$i18n.t("Added_User_Success"),timer:4e3,showConfirmButton:!1}),setTimeout(function(){window.location.href="/users"},4e3);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),validateUserName:function(t){return void 0===t},validatePassword:function(t){return void 0===t},setPermissions:function(t){var e=void 0;switch(this.defaults.RANKS.findIndex(function(e){return e.value===t})){case 0:e=0;break;case 1:case 2:case 3:case 4:case 5:e=1;break;case 6:case 7:case 8:case 9:case 10:e=2;break;case 11:case 12:e=3}console.log("permissions index",e),this.user.permissions=this.defaults.PERMISSIONS[e].value},setBranch:function(t){var e=t.permissions;t.branch;!e.includes("admin")&&e.includes("branch_head")&&(this.user.branch=t.branch,this.disabled.branch=!0,this.disabled.permissions=!0)}}},_=n(22),w=n(34),x=n.n(w),S=n(737),I=n(185),y=n(177),k=n(178),$=n(791),V=n(179),B=n(788),C=n(574),component=Object(_.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{direction:"rtl"},attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[n("v-layout",{attrs:{"justify-center":"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md12:""}},[n("material-card",{attrs:{dark:"",color:"deep",title:t.$t("Add_User")}},[n("v-form",{ref:"form",attrs:{autocomplete:"new-password"}},[n("v-container",{attrs:{"py-0":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:"",md2:""}},[n("v-text-field",{staticClass:"black-input",attrs:{label:t.$t("FullName"),rules:t.rules.fullName},model:{value:t.user.fullName,callback:function(e){t.$set(t.user,"fullName",e)},expression:"user.fullName"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md2:""}},[n("v-text-field",{staticClass:"white-input",attrs:{label:t.$t("USERNAME"),rules:t.rules.username},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md2:""}},[n("v-text-field",{staticClass:"white-input",attrs:{minLength:5,label:t.$t("PASSWORD"),rules:t.rules.password,type:"password"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md2:""}},[n("v-select",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.disabled.branch&&t.defaults.RANKS?t.defaults.RANKS.slice(0,11):t.defaults.RANKS,"item-text":"ar","item-value":"value",label:t.$t("Rank")},model:{value:t.user.rank,callback:function(e){t.$set(t.user,"rank",e)},expression:"user.rank"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md2:""}},[n("v-autocomplete",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.defaults.BRANCHES,"item-text":"ar","item-value":"value",disabled:t.disabled.branch,label:t.$t("Branch")},model:{value:t.user.branch,callback:function(e){t.$set(t.user,"branch",e)},expression:"user.branch"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md2:""}},[n("v-select",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.disabled.branch&&t.defaults.PERMISSIONS?t.defaults.PERMISSIONS.slice(0,3):t.defaults.PERMISSIONS,"item-text":"ar","item-value":"value",label:t.$t("Permissions"),multiple:""},model:{value:t.user.permissions,callback:function(e){t.$set(t.user,"permissions",e)},expression:"user.permissions"}})],1)],1),t._v(" "),n("v-flex",{attrs:{xs12:"","text-xs-right":""}},[n("v-btn",{staticClass:"font-weight-light add-button v-btn-add",on:{click:t.submit}},[t._v("\n                  "+t._s(t.$t("Add"))+"\n                ")])],1)],1)],1)],1)],1)],1)],1)],1)},[],!1,null,null,null);e.default=component.exports;x()(component,{VAutocomplete:S.a,VBtn:I.a,VContainer:y.a,VFlex:k.a,VForm:$.a,VLayout:V.a,VSelect:B.a,VTextField:C.a})}}]);