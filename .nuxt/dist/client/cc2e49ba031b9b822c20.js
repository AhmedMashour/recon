/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{762:function(e,t,n){var r,o,l;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[t,n(0),n(813)],void 0===(l="function"==typeof(r=function(e,t,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.setOptions=void 0,t=(r=t)&&r.__esModule?r:{default:r};var o=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],l=(0,n.supported)(),c={},f=[],d={},E=[],_={};e.setOptions=function(e){_=Object.assign(_,e),E.forEach(function(e){e.setOptions(_)})},e.default=function(){n.registerPlugin.apply(void 0,arguments),f.length=0;var e=function(e){if(/^on/.test(e))return f.push(e),"continue";var t;c[e]=[String,(t=n.OptionTypes[e],{string:String,boolean:Boolean,array:Array,function:Function,int:Number,serverapi:Object,object:Object}[t])],d[e]=function(t){this._pond[e]=t}};for(var r in n.OptionTypes)e(r);return t.default.component("FilePond",{name:"FilePond",props:c,watch:d,render:function(e){return e("div",{class:{"filepond--wrapper":!0}},[e("input",{attrs:{id:this.id,name:this.name,type:"file",class:this.className,required:this.required,multiple:this.allowMultiple,accept:this.acceptedFileTypes,capture:this.captureMethod}})])},mounted:function(){var e=this;if(l){this._element=this.$el.querySelector("input");var t=f.reduce(function(t,n){return t[n]=function(){e.$emit("input",e._pond?e._pond.getFiles():[]);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];e.$emit.apply(e,[n.substr(2)].concat(r))},t},{}),r=Object.assign({},this.$attrs);this._pond=(0,n.create)(this._element,Object.assign({},_,t,r,this.$options.propsData)),Object.keys(this._pond).filter(function(e){return!o.includes(e)}).forEach(function(t){e[t]=e._pond[t]}),console.log("this pond",this._pond),E.push(this._pond)}},destroyed:function(){var e=this,t=this.$options.detached;if(this.$el.offsetParent){var n=new MutationObserver(function(n,r){var o=((n[0]||{}).removedNodes||[])[0];o&&o.contains(e.$el)&&(r.disconnect(),t.call(e))});n.observe(document.documentElement,{childList:!0,subtree:!0})}else t.call(this)},detached:function(){if(this._pond){this._pond.destroy();var e=E.indexOf(this._pond);e>=0&&E.splice(e,1),this._pond=null}}})}})?r.apply(t,o):r)||(e.exports=l)},813:function(e,t,n){!function(e){"use strict";var t=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},n=function(e){var n={};return t(e,function(t){!function(e,t,n){"function"!=typeof n?Object.defineProperty(e,t,Object.assign({},n)):e[t]=n}(n,t,e[t])}),n},r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===n)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},o=["svg","path"],l=function(e){return o.includes(e)},c=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"==typeof n&&(o=n,n=null);var element=l(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n&&(l(e)?r(element,"class",n):element.className=n),t(o,function(e,t){r(element,e,t)}),element},f=function(e,t){return function(view,e){return void 0!==e?t.splice(e,0,view):t.push(view),view}},d=function(e,t){return function(view){return t.splice(t.indexOf(view),1),view.element.parentNode&&e.removeChild(view.element),view}},E="undefined"!=typeof window&&void 0!==window.document,_=function(){return E},T="children"in(_()?c("svg"):{})?function(e){return e.children.length}:function(e){return e.childNodes.length},v=function(e,t,n,r){var o=n[0]||e.left,l=n[1]||e.top,c=o+e.width,f=l+e.height*(r[1]||1),rect={element:Object.assign({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:o,top:l,right:c,bottom:f}};return t.filter(function(e){return!e.isRectIgnored()}).map(function(e){return e.rect}).forEach(function(e){I(rect.inner,Object.assign({},e.inner)),I(rect.outer,Object.assign({},e.outer))}),m(rect.inner),rect.outer.bottom+=rect.element.marginBottom,rect.outer.right+=rect.element.marginRight,m(rect.outer),rect},I=function(e,t){t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},m=function(rect){rect.width=rect.right-rect.left,rect.height=rect.bottom-rect.top},h=function(e){return"number"==typeof e},R=function(e){return e<.5?2*e*e:(4-2*e)*e-1},O={spring:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiffness,r=void 0===t?.5:t,o=e.damping,l=void 0===o?.75:o,c=e.mass,f=void 0===c?10:c,d=null,E=null,_=0,T=!1,v=n({interpolate:function(e,t){if(!T)return h(d)&&h(E)?void(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001;return Math.abs(e-t)<r&&Math.abs(n)<r}(E+=_+=-(E-d)*r/f,d,_*=l)||t?(E=d,_=0,T=!0,v.onupdate(E),v.oncomplete(E)):v.onupdate(E)):(T=!0,void(_=0))},target:{set:function(e){if(h(e)&&!h(E)&&(E=e),null===d&&(d=e,E=e),E===(d=e)||void 0===d)return T=!0,_=0,v.onupdate(E),void v.oncomplete(E);T=!1},get:function(){return d}},resting:{get:function(){return T}},onupdate:function(e){},oncomplete:function(e){}});return v},tween:function(){var e,p,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.duration,o=void 0===r?500:r,l=t.easing,c=void 0===l?R:l,f=t.delay,d=void 0===f?0:f,E=null,_=!0,T=!1,v=null,I=n({interpolate:function(t,n){_||null===v||(null===E&&(E=t),t-E<d||((e=t-E-d)>=o||n?(e=1,p=T?0:1,I.onupdate(p*v),I.oncomplete(p*v),_=!0):(p=e/o,I.onupdate((e>=0?c(T?1-p:p):0)*v))))},target:{get:function(){return T?0:v},set:function(e){if(null===v)return v=e,I.onupdate(e),void I.oncomplete(e);e<v?(v=1,T=!0):(T=!1,v=e),_=!1,E=null}},resting:{get:function(){return _}},onupdate:function(e){},oncomplete:function(e){}});return I}},y=function(e,t,n){var r=e[t]&&"object"==typeof e[t][n]?e[t][n]:e[t]||e,o="string"==typeof r?r:r.type,l="object"==typeof r?Object.assign({},r):{};return O[o]?O[o](l):null},D=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(t=Array.isArray(t)?t:[t]).forEach(function(t){e.forEach(function(e){var o=e,l=function(){return n[e]},c=function(t){return n[e]=t};"object"==typeof e&&(o=e.key,l=e.getter||l,c=e.setter||c),t[o]&&!r||(t[o]={get:l,set:c})})})},S=function(e){return null!=e},A={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},P=function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!0;for(var n in t)if(t[n]!==e[n])return!0;return!1},L=function(element,e){var t=e.opacity,n=e.perspective,r=e.translateX,o=e.translateY,l=e.scaleX,c=e.scaleY,f=e.rotateX,d=e.rotateY,E=e.rotateZ,_=e.originX,T=e.originY,v=e.width,I=e.height,m="",h="";(S(_)||S(T))&&(h+="transform-origin: "+(_||0)+"px "+(T||0)+"px;"),S(n)&&(m+="perspective("+n+"px) "),(S(r)||S(o))&&(m+="translate3d("+(r||0)+"px, "+(o||0)+"px, 0) "),(S(l)||S(c))&&(m+="scale3d("+(S(l)?l:1)+", "+(S(c)?c:1)+", 1) "),S(E)&&(m+="rotateZ("+E+"rad) "),S(f)&&(m+="rotateX("+f+"rad) "),S(d)&&(m+="rotateY("+d+"rad) "),m.length&&(h+="transform:"+m+";"),S(t)&&(h+="opacity:"+t+";",0===t&&(h+="visibility:hidden;"),t<1&&(h+="pointer-events:none;")),S(I)&&(h+="height:"+I+"px;"),S(v)&&(h+="width:"+v+"px;");var R=element.elementCurrentStyle||"";h.length===R.length&&h===R||(element.style.cssText=h,element.elementCurrentStyle=h)},M={styles:function(e){var t=e.mixinConfig,n=e.viewProps,r=e.viewInternalAPI,o=e.viewExternalAPI,view=e.view,l=Object.assign({},n),c={};D(t,[r,o],n);var f=function(){return view.rect?v(view.rect,view.childViews,[n.translateX||0,n.translateY||0],[n.scaleX||0,n.scaleY||0]):null};return r.rect={get:f},o.rect={get:f},t.forEach(function(e){n[e]=void 0===l[e]?A[e]:l[e]}),{write:function(){if(P(c,n))return L(view.element,n),Object.assign(c,Object.assign({},n)),!0},destroy:function(){}}},listeners:function(e){e.mixinConfig,e.viewProps,e.viewInternalAPI;var element,t=e.viewExternalAPI,view=(e.viewState,e.view),n=[],r=(element=view.element,function(e,t){element.addEventListener(e,t)}),o=function(element){return function(e,t){element.removeEventListener(e,t)}}(view.element);return t.on=function(e,t){n.push({type:e,fn:t}),r(e,t)},t.off=function(e,t){n.splice(n.findIndex(function(n){return n.type===e&&n.fn===t}),1),o(e,t)},{write:function(){return!0},destroy:function(){n.forEach(function(e){o(e.type,e.fn)})}}},animations:function(e){var n=e.mixinConfig,r=e.viewProps,o=e.viewInternalAPI,l=e.viewExternalAPI,c=Object.assign({},r),f=[];return t(n,function(e,t){var n=y(t);if(n){n.onupdate=function(t){r[e]=t},n.target=c[e];var d={key:e,setter:function(e){n.target!==e&&(n.target=e)},getter:function(){return r[e]}};D([d],[o,l],r,!0),f.push(n)}}),{write:function(e){var t=document.hidden,n=!0;return f.forEach(function(r){r.resting||(n=!1),r.interpolate(e,t)}),n},destroy:function(){}}},apis:function(e){var t=e.mixinConfig,n=e.viewProps,r=e.viewExternalAPI;D(t,r,n)}},w=function(){var rect=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},element=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},style=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return element.layoutCalculated||(rect.paddingTop=parseInt(style.paddingTop,10)||0,rect.marginTop=parseInt(style.marginTop,10)||0,rect.marginRight=parseInt(style.marginRight,10)||0,rect.marginBottom=parseInt(style.marginBottom,10)||0,rect.marginLeft=parseInt(style.marginLeft,10)||0,element.layoutCalculated=!0),rect.left=element.offsetLeft||0,rect.top=element.offsetTop||0,rect.width=element.offsetWidth||0,rect.height=element.offsetHeight||0,rect.right=rect.left+rect.width,rect.bottom=rect.top+rect.height,rect.scrollTop=element.scrollTop,rect.hidden=null===element.offsetParent,rect},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tag,r=void 0===t?"div":t,o=e.name,l=void 0===o?null:o,E=e.attributes,_=void 0===E?{}:E,I=e.read,m=void 0===I?function(){}:I,h=e.write,R=void 0===h?function(){}:h,O=e.create,y=void 0===O?function(){}:O,D=e.destroy,S=void 0===D?function(){}:D,A=e.filterFrameActionsForChild,P=void 0===A?function(e,t){return t}:A,L=e.didCreateView,C=void 0===L?function(){}:L,N=e.didWriteView,G=void 0===N?function(){}:N,U=e.ignoreRect,B=void 0!==U&&U,V=e.ignoreRectUpdate,x=void 0!==V&&V,F=e.mixins,Y=void 0===F?[]:F;return function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},element=c(r,"filepond--"+l,_),style=window.getComputedStyle(element,null),rect=w(),E=null,I=!1,h=[],O=[],D={},A={},L=[R],N=[m],U=[S],V=function(){return element},F=function(){return h.concat()},j=function(){return E||(E=v(rect,h,[0,0],[1,1]))},k={element:{get:V},style:{get:function(){return style}},childViews:{get:F}},H=Object.assign({},k,{rect:{get:j},ref:{get:function(){return D}},is:function(e){return l===e},appendChild:(t=element,function(e,n){void 0!==n&&t.children[n]?t.insertBefore(e,t.children[n]):t.appendChild(e)}),createChildView:function(e){return function(view,t){return view(e,t)}}(e),linkView:function(view){return h.push(view),view},unlinkView:function(view){h.splice(h.indexOf(view),1)},appendChildView:f(0,h),removeChildView:d(element,h),registerWriter:function(e){return L.push(e)},registerReader:function(e){return N.push(e)},registerDestroyer:function(e){return U.push(e)},invalidateLayout:function(){return element.layoutCalculated=!1},dispatch:e.dispatch,query:e.query}),X={element:{get:V},childViews:{get:F},rect:{get:j},resting:{get:function(){return I}},isRectIgnored:function(){return B},_read:function(){E=null,h.forEach(function(e){return e._read()}),x&&rect.width&&rect.height||w(rect,element,style);var e={root:z,props:o,rect:rect};N.forEach(function(t){return t(e)})},_write:function(e,t,n){var r=0===t.length;return L.forEach(function(l){!1===l({props:o,root:z,actions:t,timestamp:e,shouldOptimize:n})&&(r=!1)}),O.forEach(function(t){!1===t.write(e)&&(r=!1)}),h.filter(function(e){return!!e.element.parentNode}).forEach(function(o){o._write(e,P(o,t),n)||(r=!1)}),h.forEach(function(o,l){o.element.parentNode||(z.appendChild(o.element,l),o._read(),o._write(e,P(o,t),n),r=!1)}),I=r,G({props:o,root:z,actions:t,timestamp:e}),r},_destroy:function(){O.forEach(function(e){return e.destroy()}),U.forEach(function(e){e({root:z,props:o})}),h.forEach(function(e){return e._destroy()})}},W=Object.assign({},k,{rect:{get:function(){return rect}}});Object.keys(Y).sort(function(a,b){return"styles"===a?1:"styles"===b?-1:0}).forEach(function(e){var t=M[e]({mixinConfig:Y[e],viewProps:o,viewState:A,viewInternalAPI:H,viewExternalAPI:X,view:n(W)});t&&O.push(t)});var z=n(H);y({root:z,props:o});var Q=T(element);return h.forEach(function(e,t){z.appendChild(e.element,Q+t)}),C(z),n(X)}},N=function(e,t){return function(n){var r=n.root,o=n.props,l=n.actions,c=void 0===l?[]:l,f=n.timestamp,d=n.shouldOptimize;c.filter(function(t){return e[t.type]}).forEach(function(t){return e[t.type]({root:r,props:o,action:t.data,timestamp:f,shouldOptimize:d})}),t&&t({root:r,props:o,actions:c,timestamp:f,shouldOptimize:d})}},G=function(e,t){return t.parentNode.insertBefore(e,t)},U=function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},B=function(e){return Array.isArray(e)},V=function(e){return null==e},x=function(e){return e.trim()},F=function(e){return""+e},Y=function(e){return"boolean"==typeof e},j=function(e){return Y(e)?e:"true"===e},k=function(e){return"string"==typeof e},H=function(e){return h(e)?e:k(e)?F(e).replace(/[a-z]+/gi,""):0},X=function(e){return parseInt(H(e),10)},W=function(e){return parseFloat(H(e))},z=function(e){return h(e)&&isFinite(e)&&Math.floor(e)===e},Q=function(e){var base=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(z(e))return e;var t=F(e).trim();return/MB$/i.test(t)?(t=t.replace(/MB$i/,"").trim(),X(t)*base*base):/KB/i.test(t)?(t=t.replace(/KB$i/,"").trim(),X(t)*base):X(t)},$=function(e){return"function"==typeof e},Z={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},K=function(e,t,n,r,o){if(null===t)return null;if("function"==typeof t)return t;var l={url:"GET"===n||"PATCH"===n?"?"+e+"=":"",method:n,headers:o,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(k(t))return l.url=t,l;if(Object.assign(l,t),k(l.headers)){var c=l.headers.split(/:(.+)/);l.headers={header:c[0],value:c[1]}}return l.withCredentials=j(l.withCredentials),l},J=function(e){return"object"==typeof e&&null!==e},ee=function(e){return B(e)?"array":function(e){return null===e}(e)?"null":z(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":function(e){return J(e)&&k(e.url)&&J(e.process)&&J(e.revert)&&J(e.restore)&&J(e.fetch)}(e)?"api":typeof e},te={array:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return V(e)?[]:B(e)?e:F(e).split(t).map(x).filter(function(e){return e.length})},boolean:j,int:function(e){return"bytes"===ee(e)?Q(e):X(e)},number:W,float:W,bytes:Q,string:function(e){return $(e)?e:F(e)},function:function(e){return function(e){for(var t=self,n=e.split("."),r=null;r=n.shift();)if(!(t=t[r]))return null;return t}(e)},serverapi:function(e){return(r={}).url=k(n=e)?n:n.url||"",r.timeout=n.timeout?parseInt(n.timeout,10):0,r.headers=n.headers?n.headers:{},t(Z,function(e){r[e]=K(e,n[e],Z[e],r.timeout,r.headers)}),r.remove=n.remove||null,delete r.headers,r;var n,r},object:function(e){try{return JSON.parse(e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(e){return null}}},ne=function(e,t,n){if(e===t)return e;var r,o=ee(e);if(o!==n){var l=(r=e,te[n](r));if(o=ee(l),null===l)throw'Trying to assign value with incorrect type to "'+option+'", allowed type: "'+n+'"';e=l}return e},re=function(e){var r={};return t(e,function(t){var n,o,l,c=e[t];r[t]=(n=c[0],o=c[1],l=n,{enumerable:!0,get:function(){return l},set:function(e){l=ne(e,n,o)}})}),n(r)},oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.split(/(?=[A-Z])/).map(function(e){return e.toLowerCase()}).join(t)},ie=function(e){return function(n,r,o){var l={};return t(e,function(e){var t=oe(e,"_").toUpperCase();l["SET_"+t]=function(r){try{o.options[e]=r.value}catch(e){}n("DID_SET_"+t,{value:o.options[e]})}}),l}},ae=function(e){return function(n){var r={};return t(e,function(e){r["GET_"+oe(e,"_").toUpperCase()]=function(t){return n.options[e]}}),r}},se={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},ue=function(){return Math.random().toString(36).substr(2,9)};function le(e){this.wrapped=e}function ce(e){var t,n;function r(t,n){try{var l=e[t](n),c=l.value,f=c instanceof le;Promise.resolve(f?c.wrapped:c).then(function(e){f?r("next",e):o(l.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(l,c){var f={key:e,arg:o,resolve:l,reject:c,next:null};n?n=n.next=f:(t=n=f,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function fe(source,e){if(null==source)return{};var t,i,n=function(source,e){if(null==source)return{};var t,i,n={},r=Object.keys(source);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)>=0||(n[t]=source[t]);return n}(source,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(source);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(source,t)&&(n[t]=source[t])}return n}function de(e){return function(e){if(Array.isArray(e)){for(var i=0,t=new Array(e.length);i<e.length;i++)t[i]=e[i];return t}}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pe(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}"function"==typeof Symbol&&Symbol.asyncIterator&&(ce.prototype[Symbol.asyncIterator]=function(){return this}),ce.prototype.next=function(e){return this._invoke("next",e)},ce.prototype.throw=function(e){return this._invoke("throw",e)},ce.prototype.return=function(e){return this._invoke("return",e)};var Ee,_e,Te,ve=function(e,t){return e.splice(t,1)},Ie=function(){var e=[],t=function(t,n){ve(e,e.findIndex(function(e){return e.event===t&&(e.cb===n||!n)}))},n=function(t,n,r){e.filter(function(e){return e.event===t}).map(function(e){return e.cb}).forEach(function(e){return function(e,t){t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)}(function(){return e.apply(void 0,de(n))},r)})};return{fireSync:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];n(e,r,!0)},fire:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];n(e,r,!1)},on:function(t,n){e.push({event:t,cb:n})},onOnce:function(n,r){e.push({event:n,cb:function(){t(n,r),r.apply(void 0,arguments)}})},off:t}},me=function(e,t,n){Object.getOwnPropertyNames(e).filter(function(e){return!n.includes(e)}).forEach(function(n){return Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})},he=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],ge=function(e){var t={};return me(e,t,he),t},Re={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Oe={INPUT:1,LIMBO:2,LOCAL:3},ye=function(e){return/[^0-9]+/.exec(e)},De=function(){return ye(1.1.toLocaleString())[0]},Se={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Ae=[],be=function(e,t,n){return new Promise(function(r,o){var l=Ae.filter(function(t){return t.key===e}).map(function(e){return e.cb});if(0!==l.length){var c=l.shift();l.reduce(function(e,t){return e.then(function(e){return t(e,n)})},c(t,n)).then(function(e){return r(e)}).catch(function(e){return o(e)})}else r(t)})},Pe=function(e,t,n){return Ae.filter(function(t){return t.key===e}).map(function(e){return e.cb(t,n)})},Le=function(e,t){return Ae.push({key:e,cb:t})},Me=function(){return Object.assign({},we)},we={id:[null,Se.STRING],name:["filepond",Se.STRING],disabled:[!1,Se.BOOLEAN],className:[null,Se.STRING],required:[!1,Se.BOOLEAN],captureMethod:[null,Se.STRING],allowSyncAcceptAttribute:[!0,Se.BOOLEAN],allowDrop:[!0,Se.BOOLEAN],allowBrowse:[!0,Se.BOOLEAN],allowPaste:[!0,Se.BOOLEAN],allowMultiple:[!1,Se.BOOLEAN],allowReplace:[!0,Se.BOOLEAN],allowRevert:[!0,Se.BOOLEAN],allowRemove:[!0,Se.BOOLEAN],allowProcess:[!0,Se.BOOLEAN],allowReorder:[!1,Se.BOOLEAN],allowDirectoriesOnly:[!1,Se.BOOLEAN],forceRevert:[!1,Se.BOOLEAN],maxFiles:[null,Se.INT],checkValidity:[!1,Se.BOOLEAN],itemInsertLocationFreedom:[!0,Se.BOOLEAN],itemInsertLocation:["before",Se.STRING],itemInsertInterval:[75,Se.INT],dropOnPage:[!1,Se.BOOLEAN],dropOnElement:[!0,Se.BOOLEAN],dropValidation:[!1,Se.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],Se.ARRAY],instantUpload:[!0,Se.BOOLEAN],maxParallelUploads:[2,Se.INT],chunkUploads:[!1,Se.BOOLEAN],chunkForce:[!1,Se.BOOLEAN],chunkSize:[5e6,Se.INT],chunkRetryDelays:[[500,1e3,3e3],Se.Array],server:[null,Se.SERVER_API],fileSizeBase:[1e3,Se.INT],labelDecimalSeparator:[De(),Se.STRING],labelThousandsSeparator:[(Ee=De(),_e=1e3.toLocaleString(),Te=1e3.toString(),_e!==Te?ye(_e)[0]:"."===Ee?",":"."),Se.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',Se.STRING],labelInvalidField:["Field contains invalid files",Se.STRING],labelFileWaitingForSize:["Waiting for size",Se.STRING],labelFileSizeNotAvailable:["Size not available",Se.STRING],labelFileCountSingular:["file in list",Se.STRING],labelFileCountPlural:["files in list",Se.STRING],labelFileLoading:["Loading",Se.STRING],labelFileAdded:["Added",Se.STRING],labelFileLoadError:["Error during load",Se.STRING],labelFileRemoved:["Removed",Se.STRING],labelFileRemoveError:["Error during remove",Se.STRING],labelFileProcessing:["Uploading",Se.STRING],labelFileProcessingComplete:["Upload complete",Se.STRING],labelFileProcessingAborted:["Upload cancelled",Se.STRING],labelFileProcessingError:["Error during upload",Se.STRING],labelFileProcessingRevertError:["Error during revert",Se.STRING],labelTapToCancel:["tap to cancel",Se.STRING],labelTapToRetry:["tap to retry",Se.STRING],labelTapToUndo:["tap to undo",Se.STRING],labelButtonRemoveItem:["Remove",Se.STRING],labelButtonAbortItemLoad:["Abort",Se.STRING],labelButtonRetryItemLoad:["Retry",Se.STRING],labelButtonAbortItemProcessing:["Cancel",Se.STRING],labelButtonUndoItemProcessing:["Undo",Se.STRING],labelButtonRetryItemProcessing:["Retry",Se.STRING],labelButtonProcessItem:["Upload",Se.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',Se.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',Se.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',Se.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',Se.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',Se.STRING],oninit:[null,Se.FUNCTION],onwarning:[null,Se.FUNCTION],onerror:[null,Se.FUNCTION],onactivatefile:[null,Se.FUNCTION],oninitfile:[null,Se.FUNCTION],onaddfilestart:[null,Se.FUNCTION],onaddfileprogress:[null,Se.FUNCTION],onaddfile:[null,Se.FUNCTION],onprocessfilestart:[null,Se.FUNCTION],onprocessfileprogress:[null,Se.FUNCTION],onprocessfileabort:[null,Se.FUNCTION],onprocessfilerevert:[null,Se.FUNCTION],onprocessfile:[null,Se.FUNCTION],onprocessfiles:[null,Se.FUNCTION],onremovefile:[null,Se.FUNCTION],onpreparefile:[null,Se.FUNCTION],onupdatefiles:[null,Se.FUNCTION],onreorderfiles:[null,Se.FUNCTION],beforeDropFile:[null,Se.FUNCTION],beforeAddFile:[null,Se.FUNCTION],beforeRemoveFile:[null,Se.FUNCTION],stylePanelLayout:[null,Se.STRING],stylePanelAspectRatio:[null,Se.STRING],styleItemPanelAspectRatio:[null,Se.STRING],styleButtonRemoveItemPosition:["left",Se.STRING],styleButtonProcessItemPosition:["right",Se.STRING],styleLoadIndicatorPosition:["right",Se.STRING],styleProgressIndicatorPosition:["right",Se.STRING],styleButtonRemoveItemAlign:[!1,Se.BOOLEAN],files:[[],Se.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],Se.ARRAY]},Ce=function(e,t){return V(t)?e[0]||null:z(t)?e[t]||null:("object"==typeof t&&(t=t.id),e.find(function(e){return e.id===t})||null)},Ne=function(e){if(V(e))return e;if(/:/.test(e)){var t=e.split(":");return t[1]/t[0]}return parseFloat(e)},Ge=function(e){return e.filter(function(e){return!e.archived})},Ue={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},Be=[Re.LOAD_ERROR,Re.PROCESSING_ERROR,Re.PROCESSING_REVERT_ERROR],qe=[Re.LOADING,Re.PROCESSING,Re.PROCESSING_QUEUED,Re.INIT],Ve=[Re.PROCESSING_COMPLETE],xe=function(e){return Be.includes(e.status)},Fe=function(e){return qe.includes(e.status)},Ye=function(e){return Ve.includes(e.status)},je=function(e){return{GET_STATUS:function(){var t=Ge(e.items),n=Ue.EMPTY,r=Ue.ERROR,o=Ue.BUSY,l=Ue.IDLE,c=Ue.READY;return 0===t.length?n:t.some(xe)?r:t.some(Fe)?o:t.some(Ye)?c:l},GET_ITEM:function(t){return Ce(e.items,t)},GET_ACTIVE_ITEM:function(t){return Ce(Ge(e.items),t)},GET_ACTIVE_ITEMS:function(){return Ge(e.items)},GET_ITEMS:function(){return e.items},GET_ITEM_NAME:function(t){var n=Ce(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:function(t){var n=Ce(e.items,t);return n?n.fileSize:null},GET_STYLES:function(){return Object.keys(e.options).filter(function(e){return/^style/.test(e)}).map(function(option){return{name:option,value:e.options[option]}})},GET_PANEL_ASPECT_RATIO:function(){var t=/circle/.test(e.options.stylePanelLayout),n=t?1:Ne(e.options.stylePanelAspectRatio);return n},GET_ITEM_PANEL_ASPECT_RATIO:function(){return e.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function(t){return Ge(e.items).filter(function(e){return e.status===t})},GET_TOTAL_ITEMS:function(){return Ge(e.items).length},IS_ASYNC:function(){return J(e.options.server)&&(J(e.options.server.process)||$(e.options.server.process))}}},ke=function(e,t,n){return Math.max(Math.min(n,e),t)},He=function(e){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e)},Xe=function(e){return e.split("/").pop().split("?").shift()},We=function(e){return e.split(".").pop()},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(t+e).slice(-t.length)},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.getFullYear()+"-"+ze(e.getMonth()+1,"00")+"-"+ze(e.getDate(),"00")+"_"+ze(e.getHours(),"00")+"-"+ze(e.getMinutes(),"00")+"-"+ze(e.getSeconds(),"00")},$e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o="string"==typeof n?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return o.lastModifiedDate=new Date,e._relativePath&&(o._relativePath=e._relativePath),k(t)||(t=Qe()),t&&null===r&&We(t)?o.name=t:(r=r||function(e){if("string"!=typeof e)return"";var t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?"jpeg"===t?"jpg":t:""}(o.type),o.name=t+(r?"."+r:"")),o},Ze=function(e,t){var n=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(n){var r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},Ke=function(e){return(/^data:(.+);/.exec(e)||[])[1]||null},Je=function(e){var t=Ke(e),n=function(e){return atob(function(e){return e.split(",")[1].replace(/\s/g,"")}(e))}(e);return function(e,t){for(var n=new ArrayBuffer(e.length),r=new Uint8Array(n),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return Ze(n,t)}(n,t)},et=function(header){if(!/^content-disposition:/i.test(header))return null;var e=header.split(/filename=|filename\*=.+''/).splice(1).map(function(e){return e.trim().replace(/^["']|[;"']{0,2}$/g,"")}).filter(function(e){return e.length});return e.length?decodeURI(e[e.length-1]):null},tt=function(header){if(/content-length:/i.test(header)){var e=header.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},nt=function(header){if(/x-content-transfer-id:/i.test(header)){var e=(header.split(":")[1]||"").trim();return e||null}return null},ot=function(e){var t={source:null,name:null,size:null},n=e.split("\n"),r=!0,o=!1,l=void 0;try{for(var c,f=n[Symbol.iterator]();!(r=(c=f.next()).done);r=!0){var header=c.value,d=et(header);if(d)t.name=d;else{var E=tt(header);if(E)t.size=E;else{var source=nt(header);source&&(t.source=source)}}}}catch(e){o=!0,l=e}finally{try{r||null==f.return||f.return()}finally{if(o)throw l}}return t},it=function(e){var t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=function(n){e?(t.timestamp=Date.now(),t.request=e(n,function(e){t.duration=Date.now()-t.timestamp,t.complete=!0,e instanceof Blob&&(e=$e(e,e.name||Xe(n))),r.fire("load",e instanceof Blob?e:e?e.body:null)},function(e){r.fire("error","string"==typeof e?{type:"error",code:0,body:e}:e)},function(e,n,o){o&&(t.size=o),t.duration=Date.now()-t.timestamp,e?(t.progress=n/o,r.fire("progress",t.progress)):t.progress=null},function(){r.fire("abort")},function(e){var n=ot("string"==typeof e?e:e.headers);r.fire("meta",{size:t.size||n.size,filename:n.name,source:n.source})})):r.fire("error",{type:"error",body:"Can't load URL",code:400})},r=Object.assign({},Ie(),{setSource:function(source){return t.source=source},getProgress:function(){return t.progress},abort:function(){t.request&&t.request.abort&&t.request.abort()},load:function(){var e,o,source=t.source;r.fire("init",source),source instanceof File?r.fire("load",source):source instanceof Blob?r.fire("load",$e(source,source.name)):He(source)?r.fire("load",$e(Je(source),e,null,o)):n(source)}});return r},at=function(e){return/GET|HEAD/.test(e)},st=function(data,e,t){var n={onheaders:function(){},onprogress:function(){},onload:function(){},ontimeout:function(){},onerror:function(){},onabort:function(){},abort:function(){r=!0,l.abort()}},r=!1,o=!1;t=Object.assign({method:"POST",headers:{},withCredentials:!1},t),e=encodeURI(e),at(t.method)&&data&&(e=""+e+encodeURIComponent("string"==typeof data?data:JSON.stringify(data)));var l=new XMLHttpRequest,c=at(t.method)?l:l.upload;return c.onprogress=function(e){r||n.onprogress(e.lengthComputable,e.loaded,e.total)},l.onreadystatechange=function(){l.readyState<2||4===l.readyState&&0===l.status||o||(o=!0,n.onheaders(l))},l.onload=function(){l.status>=200&&l.status<300?n.onload(l):n.onerror(l)},l.onerror=function(){return n.onerror(l)},l.onabort=function(){r=!0,n.onabort()},l.ontimeout=function(){return n.ontimeout(l)},l.open(t.method,e,!0),z(t.timeout)&&(l.timeout=t.timeout),Object.keys(t.headers).forEach(function(e){var n=unescape(encodeURIComponent(t.headers[e]));l.setRequestHeader(e,n)}),t.responseType&&(l.responseType=t.responseType),t.withCredentials&&(l.withCredentials=!0),l.send(data),n},ut=function(e,code,body,t){return{type:e,code:code,body:body,headers:t}},lt=function(e){return function(t){e(ut("error",0,"Timeout",t.getAllResponseHeaders()))}},ct=function(e){return/\?/.test(e)},ft=function(){for(var e="",t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){e+=ct(e)&&ct(t)?t.replace(/\?/,"&"):t}),e},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("function"==typeof t)return t;if(!t||!k(t.url))return null;var n=t.onload||function(e){return e},r=t.onerror||function(e){return null};return function(o,l,c,progress,f,d){var E=st(o,ft(e,t.url),Object.assign({},t,{responseType:"blob"}));return E.onload=function(e){var r=e.getAllResponseHeaders(),c=ot(r).name||Xe(o);l(ut("load",e.status,"HEAD"===t.method?null:$e(n(e.response),c),r))},E.onerror=function(e){c(ut("error",e.status,r(e.response)||e.statusText,e.getAllResponseHeaders()))},E.onheaders=function(e){d(ut("headers",e.status,null,e.getAllResponseHeaders()))},E.ontimeout=lt(c),E.onprogress=progress,E.onabort=f,E}},Et={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},_t=function(e,t,n,r,o,l,c,progress,f,d,E){for(var _=[],T=E.chunkTransferId,v=E.chunkServer,I=E.chunkSize,m=E.chunkRetryDelays,h={serverId:T,aborted:!1},R=t.ondata||function(e){return e},O=t.onload||function(e,t){return"HEAD"===t?e.getResponseHeader("Upload-Offset"):e.response},y=t.onerror||function(e){return null},D=Math.floor(r.size/I),i=0;i<=D;i++){var S=i*I,data=r.slice(S,S+I,"application/offset+octet-stream");_[i]={index:i,size:data.size,offset:S,data:data,file:r,progress:0,retries:de(m),status:Et.QUEUED,error:null,request:null,timeout:null}}var A,P,L,M,w=function(e){return e.status===Et.QUEUED||e.status===Et.ERROR},C=function(t){if(!h.aborted)if(t=t||_.find(w)){t.status=Et.PROCESSING,t.progress=null;var n=v.ondata||function(e){return e},o=v.onerror||function(e){return null},d=ft(e,v.url,h.serverId),E="function"==typeof v.headers?v.headers(t):Object.assign({},v.headers,{"Content-Type":"application/offset+octet-stream","Upload-Offset":t.offset,"Upload-Length":r.size,"Upload-Name":r.name}),T=t.request=st(n(t.data),d,Object.assign({},v,{headers:E}));T.onload=function(){t.status=Et.COMPLETE,t.request=null,U()},T.onprogress=function(e,n,r){t.progress=e?n:null,G()},T.onerror=function(e){t.status=Et.ERROR,t.request=null,t.error=o(e.response)||e.statusText,N(t)||c(ut("error",e.status,o(e.response)||e.statusText,e.getAllResponseHeaders()))},T.ontimeout=function(e){t.status=Et.ERROR,t.request=null,N(t)||lt(c)(e)},T.onabort=function(){t.status=Et.QUEUED,t.request=null,f()}}else _.every(function(e){return e.status===Et.COMPLETE})&&l(h.serverId)},N=function(e){return 0!==e.retries.length&&(e.status=Et.WAITING,clearTimeout(e.timeout),e.timeout=setTimeout(function(){C(e)},e.retries.shift()),!0)},G=function(){var e=_.reduce(function(p,e){return null===p||null===e.progress?null:p+e.progress},0);if(null===e)return progress(!1,0,0);var t=_.reduce(function(e,t){return e+t.size},0);progress(!0,e,t)},U=function(){var e=_.filter(function(e){return e.status===Et.PROCESSING}).length;e>=1||C()};return h.serverId?(A=function(e){h.aborted||(_.filter(function(t){return t.offset<e}).forEach(function(e){e.status=Et.COMPLETE,e.progress=e.size}),U())},P=ft(e,v.url,h.serverId),L={headers:"function"==typeof t.headers?t.headers(h.serverId):Object.assign({},t.headers),method:"HEAD"},(M=st(null,P,L)).onload=function(e){return A(O(e,L.method))},M.onerror=function(e){return c(ut("error",e.status,y(e.response)||e.statusText,e.getAllResponseHeaders()))},M.ontimeout=lt(c)):function(l){var f=new FormData;J(o)&&f.append(n,JSON.stringify(o));var d="function"==typeof t.headers?t.headers(r,o):Object.assign({},t.headers,{"Upload-Length":r.size}),E=Object.assign({},t,{headers:d}),_=st(R(f),ft(e,t.url),E);_.onload=function(e){return l(O(e,E.method))},_.onerror=function(e){return c(ut("error",e.status,y(e.response)||e.statusText,e.getAllResponseHeaders()))},_.ontimeout=lt(c)}(function(e){h.aborted||(d(e),h.serverId=e,U())}),{abort:function(){h.aborted=!0,_.forEach(function(e){clearTimeout(e.timeout),e.request&&e.request.abort()})}}},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return"function"==typeof t?function(){for(var e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return t.apply(void 0,[n].concat(o,[r]))}:t&&k(t.url)?function(e,t,n,r){return function(o,l,c,f,progress,d,E){if(o){var _=r.chunkUploads,T=_&&o.size>r.chunkSize,v=_&&(T||r.chunkForce);if(o instanceof Blob&&v)return _t(e,t,n,o,l,c,f,progress,d,E,r);var I=t.ondata||function(e){return e},m=t.onload||function(e){return e},h=t.onerror||function(e){return null},R=new FormData;J(l)&&R.append(n,JSON.stringify(l)),(o instanceof Blob?[{name:null,file:o}]:o).forEach(function(e){R.append(n,e.file,null===e.name?e.file.name:""+e.name+e.file.name)});var O=st(I(R),ft(e,t.url),t);return O.onload=function(e){c(ut("load",e.status,m(e.response),e.getAllResponseHeaders()))},O.onerror=function(e){f(ut("error",e.status,h(e.response)||e.statusText,e.getAllResponseHeaders()))},O.ontimeout=lt(f),O.onprogress=progress,O.onabort=d,O}}}(e,t,n,r):null},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if("function"==typeof t)return t;if(!t||!k(t.url))return function(e,t){return t()};var n=t.onload||function(e){return e},r=t.onerror||function(e){return null};return function(o,l,c){var f=st(o,e+t.url,t);return f.onload=function(e){l(ut("load",e.status,n(e.response),e.getAllResponseHeaders()))},f.onerror=function(e){c(ut("error",e.status,r(e.response)||e.statusText,e.getAllResponseHeaders()))},f.ontimeout=lt(c),f}},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e+Math.random()*(t-e)},mt=function(e){var t={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},n=function(){t.request&&(t.perceivedPerformanceUpdater.clear(),t.request.abort&&t.request.abort(),t.complete=!0)},r=Object.assign({},Ie(),{process:function(n,o){var l=function(){0!==t.duration&&null!==t.progress&&r.fire("progress",r.getProgress())},c=function(){t.complete=!0,r.fire("load-perceived",t.response.body)};r.fire("start"),t.timestamp=Date.now(),t.perceivedPerformanceUpdater=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:25),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,o=null,l=Date.now();return function c(){var f=Date.now()-l,d=It(n,r);f+d>t&&(d=f+d-t);var progress=f/t;progress>=1||document.hidden?e(1):(e(progress),o=setTimeout(c,d))}(),{clear:function(){clearTimeout(o)}}}(function(progress){t.perceivedProgress=progress,t.perceivedDuration=Date.now()-t.timestamp,l(),t.response&&1===t.perceivedProgress&&!t.complete&&c()},It(750,1500)),t.request=e(n,o,function(e){t.response=J(e)?e:{type:"load",code:200,body:""+e,headers:{}},t.duration=Date.now()-t.timestamp,t.progress=1,r.fire("load",t.response.body),1===t.perceivedProgress&&c()},function(e){t.perceivedPerformanceUpdater.clear(),r.fire("error",J(e)?e:{type:"error",code:0,body:""+e})},function(e,n,r){t.duration=Date.now()-t.timestamp,t.progress=e?n/r:null,l()},function(){t.perceivedPerformanceUpdater.clear(),r.fire("abort",t.response?t.response.body:null)},function(e){r.fire("transfer",e)})},abort:n,getProgress:function(){return t.progress?Math.min(t.progress,t.perceivedProgress):null},getDuration:function(){return Math.min(t.duration,t.perceivedDuration)},reset:function(){n(),t.complete=!1,t.perceivedProgress=0,t.progress=0,t.timestamp=null,t.perceivedDuration=0,t.duration=0,t.request=null,t.response=null}});return r},ht=function(e){return e.substr(0,e.lastIndexOf("."))||e},gt=function(e){return!!(e instanceof File||e instanceof Blob&&e.name)},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=ue(),l={archived:!1,frozen:!1,released:!1,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:!1,status:t?Re.PROCESSING_COMPLETE:Re.INIT,activeLoader:null,activeProcessor:null},c=null,f={},d=function(e){return l.status=e},E=function(e){if(!l.released&&!l.frozen){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];T.fire.apply(T,[e].concat(n))}},_=function(e,t,n){var r=e.split("."),o=r[0],l=r.pop(),data=f;r.forEach(function(e){return data=data[e]}),JSON.stringify(data[l])!==JSON.stringify(t)&&(data[l]=t,n||E("metadata-update",{key:o,value:f[o]}))},T=Object.assign({id:{get:function(){return o}},origin:{get:function(){return e}},serverId:{get:function(){return l.serverFileReference}},transferId:{get:function(){return l.transferId}},status:{get:function(){return l.status}},filename:{get:function(){return l.file.name}},filenameWithoutExtension:{get:function(){return ht(l.file.name)}},fileExtension:{get:function(){return We(l.file.name)}},fileType:{get:function(){return l.file.type}},fileSize:{get:function(){return l.file.size}},file:{get:function(){return l.file}},relativePath:{get:function(){return l.file._relativePath}},source:{get:function(){return l.source}},getMetadata:function(e){return function e(t){if(!J(t))return t;var n=B(t)?[]:{};for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];n[r]=o&&J(o)?e(o):o}return n}(e?f[e]:f)},setMetadata:function(e,t,n){if(J(e)){var data=e;return Object.keys(data).forEach(function(e){_(e,data[e],t)}),e}return _(e,t,n),t},extend:function(e,t){return v[e]=t},abortLoad:function(){l.activeLoader?l.activeLoader.abort():(d(Re.INIT),E("load-abort"))},retryLoad:function(){l.activeLoader&&l.activeLoader.load()},requestProcessing:function(){l.processingAborted=!1,d(Re.PROCESSING_QUEUED)},abortProcessing:function(){return new Promise(function(e){if(!l.activeProcessor)return l.processingAborted=!0,d(Re.IDLE),E("process-abort"),void e();c=function(){e()},l.activeProcessor.abort()})},load:function(source,t,n){l.source=source,T.fireSync("init"),l.file?T.fireSync("load-skip"):(l.file=function(source){var data=[source.name,source.size,source.type];return source instanceof Blob||He(source)?data[0]=source.name||Qe():He(source)?(data[1]=source.length,data[2]=Ke(source)):k(source)&&(data[0]=Xe(source),data[1]=0,data[2]="application/octet-stream"),{name:data[0],size:data[1],type:data[2]}}(source),t.on("init",function(){E("load-init")}),t.on("meta",function(meta){l.file.size=meta.size,l.file.filename=meta.filename,meta.source&&(e=Oe.LIMBO,l.serverFileReference=meta.source,l.status=Re.PROCESSING_COMPLETE),E("load-meta")}),t.on("progress",function(progress){d(Re.LOADING),E("load-progress",progress)}),t.on("error",function(e){d(Re.LOAD_ERROR),E("load-request-error",e)}),t.on("abort",function(){d(Re.INIT),E("load-abort")}),t.on("load",function(t){l.activeLoader=null;var r=function(t){l.file=gt(t)?t:l.file,e===Oe.LIMBO&&l.serverFileReference?d(Re.PROCESSING_COMPLETE):d(Re.IDLE),E("load")};l.serverFileReference?r(t):n(t,r,function(e){l.file=t,E("load-meta"),d(Re.LOAD_ERROR),E("load-file-error",e)})}),t.setSource(source),l.activeLoader=t,t.load())},process:function e(t,n){if(l.processingAborted)l.processingAborted=!1;else if(d(Re.PROCESSING),c=null,l.file instanceof Blob){t.on("load",function(e){l.transferId=null,l.serverFileReference=e}),t.on("transfer",function(e){l.transferId=e}),t.on("load-perceived",function(e){l.activeProcessor=null,l.transferId=null,l.serverFileReference=e,d(Re.PROCESSING_COMPLETE),E("process-complete",e)}),t.on("start",function(){E("process-start")}),t.on("error",function(e){l.activeProcessor=null,d(Re.PROCESSING_ERROR),E("process-error",e)}),t.on("abort",function(e){l.activeProcessor=null,l.transferId=null,l.serverFileReference=e,d(Re.IDLE),E("process-abort"),c&&c()}),t.on("progress",function(progress){E("process-progress",progress)});var r=console.error;n(l.file,function(e){l.archived||t.process(e,Object.assign({},f))},r),l.activeProcessor=t}else T.on("load",function(){e(t,n)})},revert:function(e,t){return new Promise(function(n,r){null!==l.serverFileReference?(e(l.serverFileReference,function(){l.serverFileReference=null,n()},function(e){t?(d(Re.PROCESSING_REVERT_ERROR),E("process-revert-error"),r(e)):n()}),d(Re.IDLE),E("process-revert")):n()})}},Ie(),{freeze:function(){return l.frozen=!0},release:function(){return l.released=!0},released:{get:function(){return l.released}},archive:function(){return l.archived=!0},archived:{get:function(){return l.archived}}}),v=n(T);return v},Ot=function(e,t){var n=function(e,t){return V(t)?0:k(t)?e.findIndex(function(e){return e.id===t}):-1}(e,t);if(!(n<0))return e[n]||null},yt=function(e,t,n,progress,r,o){var l=st(null,e,{method:"GET",responseType:"blob"});return l.onload=function(n){var r=n.getAllResponseHeaders(),o=ot(r).name||Xe(e);t(ut("load",n.status,$e(n.response,o),r))},l.onerror=function(e){n(ut("error",e.status,e.statusText,e.getAllResponseHeaders()))},l.onheaders=function(e){o(ut("headers",e.status,null,e.getAllResponseHeaders()))},l.ontimeout=lt(n),l.onprogress=progress,l.onabort=r,l},Dt=function(e){return 0===e.indexOf("//")&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},St=function(label){return function(){return $(label)?label.apply(void 0,arguments):label}},At=function(e,t){clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(function(){e("DID_UPDATE_ITEMS",{items:Ge(t.items)})},0)},bt=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise(function(t){if(!e)return t(!0);var r=e.apply(void 0,n);return null==r?t(!0):"boolean"==typeof r?t(r):void("function"==typeof r.then&&r.then(t))})},Pt=function(e,t){e.items.sort(function(a,b){return t(ge(a),ge(b))})},Lt=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.query,o=n.success,l=void 0===o?function(){}:o,c=n.failure,f=void 0===c?function(){}:c,d=fe(n,["query","success","failure"]),E=Ce(e.items,r);E?t(E,l,f,d||{}):f({error:ut("error",0,"Item not found"),file:null})}},Mt=function(e,n,r){return{ABORT_ALL:function(){Ge(r.items).forEach(function(e){e.freeze(),e.abortLoad(),e.abortProcessing()})},DID_SET_FILES:function(t){var n=t.value,o=void 0===n?[]:n,l=o.map(function(e){return{source:e.source?e.source:e,options:e.options}}),c=Ge(r.items);c.forEach(function(t){l.find(function(e){return e.source===t.source||e.source===t.file})||e("REMOVE_ITEM",{query:t,remove:!1})}),c=Ge(r.items),l.forEach(function(t,n){c.find(function(e){return e.source===t.source||e.file===t.source})||e("ADD_ITEM",Object.assign({},t,{interactionMethod:se.NONE,index:n}))})},DID_UPDATE_ITEM_METADATA:function(t){var o=t.id;clearTimeout(r.itemUpdateTimeout),r.itemUpdateTimeout=setTimeout(function(){var t=Ot(r.items,o);if(n("IS_ASYNC")){var l,c=function(){setTimeout(function(){e("REQUEST_ITEM_PROCESSING",{query:o})},32)};return t.status===Re.PROCESSING_COMPLETE?(l=r.options.instantUpload,void t.revert(vt(r.options.server.url,r.options.server.revert),n("GET_FORCE_REVERT")).then(l?c:function(){}).catch(function(){})):t.status===Re.PROCESSING?function(e){t.abortProcessing().then(e?c:function(){})}(r.options.instantUpload):void(r.options.instantUpload&&c())}be("SHOULD_PREPARE_OUTPUT",!1,{item:t,query:n}).then(function(n){n&&e("REQUEST_PREPARE_OUTPUT",{query:o,item:t,success:function(t){e("DID_PREPARE_OUTPUT",{id:o,file:t})}},!0)})},0)},MOVE_ITEM:function(e){var t=e.query,n=e.index,o=Ce(r.items,t);if(o){var l=r.items.indexOf(o);n=ke(n,0,r.items.length-1),l!==n&&r.items.splice(n,0,r.items.splice(l,1)[0])}},SORT:function(t){var o=t.compare;Pt(r,o),e("DID_SORT_ITEMS",{items:n("GET_ACTIVE_ITEMS")})},ADD_ITEMS:function(t){var r=t.items,o=t.index,l=t.interactionMethod,c=t.success,f=void 0===c?function(){}:c,d=t.failure,E=void 0===d?function(){}:d,_=o;if(-1===o||void 0===o){var T=n("GET_ITEM_INSERT_LOCATION"),v=n("GET_TOTAL_ITEMS");_="before"===T?0:v}var I=n("GET_IGNORED_FILES"),m=r.filter(function(source){return gt(source)?!I.includes(source.name.toLowerCase()):!V(source)}),h=m.map(function(source){return new Promise(function(t,n){e("ADD_ITEM",{interactionMethod:l,source:source.source||source,success:t,failure:n,index:_++,options:source.options||{}})})});Promise.all(h).then(f).catch(E)},ADD_ITEM:function(t){var source=t.source,o=t.index,l=void 0===o?-1:o,c=t.interactionMethod,f=t.success,d=void 0===f?function(){}:f,E=t.failure,_=void 0===E?function(){}:E,T=t.options,v=void 0===T?{}:T;if(V(source))_({error:ut("error",0,"No source"),file:null});else if(!gt(source)||!r.options.ignoredFiles.includes(source.name.toLowerCase())){if(!function(e){var t=Ge(e.items).length;if(!e.options.allowMultiple)return 0===t;var n=e.options.maxFiles;return null===n||t<n}(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){var I=ut("warning",0,"Max files");return e("DID_THROW_MAX_FILES",{source:source,error:I}),void _({error:I,file:null})}var m=Ge(r.items)[0];if(m.status===Re.PROCESSING_COMPLETE||m.status===Re.PROCESSING_REVERT_ERROR){var h=n("GET_FORCE_REVERT");if(m.revert(vt(r.options.server.url,r.options.server.revert),h).then(function(){h&&e("ADD_ITEM",{source:source,index:l,interactionMethod:c,success:d,failure:_,options:v})}).catch(function(){}),h)return}e("REMOVE_ITEM",{query:m.id})}var R="local"===v.type?Oe.LOCAL:"limbo"===v.type?Oe.LIMBO:Oe.INPUT,O=Rt(R,R===Oe.INPUT?null:source,v.file);Object.keys(v.metadata||{}).forEach(function(e){O.setMetadata(e,v.metadata[e])}),Pe("DID_CREATE_ITEM",O,{query:n,dispatch:e});var y=n("GET_ITEM_INSERT_LOCATION");r.options.itemInsertLocationFreedom||(l="before"===y?-1:r.items.length),function(e,t,n){V(t)||(void 0===n?e.push(t):(n=ke(n,0,e.length),function(e,t,n){e.splice(t,0,n)}(e,n,t)))}(r.items,O,l),$(y)&&source&&Pt(r,y);var D=O.id;O.on("init",function(){e("DID_INIT_ITEM",{id:D})}),O.on("load-init",function(){e("DID_START_ITEM_LOAD",{id:D})}),O.on("load-meta",function(){e("DID_UPDATE_ITEM_META",{id:D})}),O.on("load-progress",function(progress){e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:D,progress:progress})}),O.on("load-request-error",function(t){var n=St(r.options.labelFileLoadError)(t);if(t.code>=400&&t.code<500)return e("DID_THROW_ITEM_INVALID",{id:D,error:t,status:{main:n,sub:t.code+" ("+t.body+")"}}),void _({error:t,file:ge(O)});e("DID_THROW_ITEM_LOAD_ERROR",{id:D,error:t,status:{main:n,sub:r.options.labelTapToRetry}})}),O.on("load-file-error",function(t){e("DID_THROW_ITEM_INVALID",{id:D,error:t.status,status:t.status}),_({error:t.status,file:ge(O)})}),O.on("load-abort",function(){e("REMOVE_ITEM",{query:D})}),O.on("load-skip",function(){e("COMPLETE_LOAD_ITEM",{query:D,item:O,data:{source:source,success:d}})}),O.on("load",function(){var t=function(t){t?(O.on("metadata-update",function(t){e("DID_UPDATE_ITEM_METADATA",{id:D,change:t})}),be("SHOULD_PREPARE_OUTPUT",!1,{item:O,query:n}).then(function(t){var n=function(){e("COMPLETE_LOAD_ITEM",{query:D,item:O,data:{source:source,success:d}}),At(e,r)};t?e("REQUEST_PREPARE_OUTPUT",{query:D,item:O,success:function(t){e("DID_PREPARE_OUTPUT",{id:D,file:t}),n()}},!0):n()})):e("REMOVE_ITEM",{query:D})};be("DID_LOAD_ITEM",O,{query:n,dispatch:e}).then(function(){bt(n("GET_BEFORE_ADD_FILE"),ge(O)).then(t)}).catch(function(){t(!1)})}),O.on("process-start",function(){e("DID_START_ITEM_PROCESSING",{id:D})}),O.on("process-progress",function(progress){e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:D,progress:progress})}),O.on("process-error",function(t){e("DID_THROW_ITEM_PROCESSING_ERROR",{id:D,error:t,status:{main:St(r.options.labelFileProcessingError)(t),sub:r.options.labelTapToRetry}})}),O.on("process-revert-error",function(t){e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:D,error:t,status:{main:St(r.options.labelFileProcessingRevertError)(t),sub:r.options.labelTapToRetry}})}),O.on("process-complete",function(t){e("DID_COMPLETE_ITEM_PROCESSING",{id:D,error:null,serverFileReference:t}),e("DID_DEFINE_VALUE",{id:D,value:t})}),O.on("process-abort",function(){e("DID_ABORT_ITEM_PROCESSING",{id:D})}),O.on("process-revert",function(){e("DID_REVERT_ITEM_PROCESSING",{id:D}),e("DID_DEFINE_VALUE",{id:D,value:null})}),e("DID_ADD_ITEM",{id:D,index:l,interactionMethod:c}),At(e,r);var S=r.options.server||{},A=S.url,P=S.load,L=S.restore,M=S.fetch;O.load(source,it(R===Oe.INPUT?k(source)&&function(e){return(e.indexOf(":")>-1||e.indexOf("//")>-1)&&Dt(location.href)!==Dt(e)}(source)&&M?pt(A,M):yt:pt(A,R===Oe.LIMBO?L:P)),function(e,t,r){be("LOAD_FILE",e,{query:n}).then(t).catch(r)})}},REQUEST_PREPARE_OUTPUT:function(e){var t=e.item,r=e.success,o=e.failure,l=void 0===o?function(){}:o,c={error:ut("error",0,"Item not found"),file:null};if(t.archived)return l(c);be("PREPARE_OUTPUT",t.file,{query:n,item:t}).then(function(e){be("COMPLETE_PREPARE_OUTPUT",e,{query:n,item:t}).then(function(e){if(t.archived)return l(c);r(e)})})},COMPLETE_LOAD_ITEM:function(t){var o=t.item,data=t.data,l=data.success,source=data.source,c=n("GET_ITEM_INSERT_LOCATION");if($(c)&&source&&Pt(r,c),e("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.origin===Oe.INPUT?null:source}),l(ge(o)),o.origin!==Oe.LOCAL)return o.origin===Oe.LIMBO?(e("DID_COMPLETE_ITEM_PROCESSING",{id:o.id,error:null,serverFileReference:source}),void e("DID_DEFINE_VALUE",{id:o.id,value:source})):void(n("IS_ASYNC")&&r.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:o.id}));e("DID_LOAD_LOCAL_ITEM",{id:o.id})},RETRY_ITEM_LOAD:Lt(r,function(e){e.retryLoad()}),REQUEST_ITEM_PREPARE:Lt(r,function(t,n,r){e("REQUEST_PREPARE_OUTPUT",{query:t.id,item:t,success:function(r){e("DID_PREPARE_OUTPUT",{id:t.id,file:r}),n({file:t,output:r})},failure:r},!0)}),REQUEST_ITEM_PROCESSING:Lt(r,function(t,o,l){var c=t.status===Re.IDLE||t.status===Re.PROCESSING_ERROR;if(c)t.status!==Re.PROCESSING_QUEUED&&(t.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:t.id}),e("PROCESS_ITEM",{query:t,success:o,failure:l},!0));else{var f=function(){return e("REQUEST_ITEM_PROCESSING",{query:t,success:o,failure:l})},d=function(){return document.hidden?f():setTimeout(f,32)};t.status===Re.PROCESSING_COMPLETE||t.status===Re.PROCESSING_REVERT_ERROR?t.revert(vt(r.options.server.url,r.options.server.revert),n("GET_FORCE_REVERT")).then(d).catch(function(){}):t.status===Re.PROCESSING&&t.abortProcessing().then(d)}}),PROCESS_ITEM:Lt(r,function(t,o,l){var c=n("GET_MAX_PARALLEL_UPLOADS"),f=n("GET_ITEMS_BY_STATUS",Re.PROCESSING).length;if(f!==c){if(t.status!==Re.PROCESSING){var d=function t(){var n=r.processingQueue.shift();if(n){var o=n.id,l=n.success,c=n.failure,f=Ce(r.items,o);f&&!f.archived?e("PROCESS_ITEM",{query:o,success:l,failure:c},!0):t()}};t.onOnce("process-complete",function(){o(ge(t)),d();var l=n("GET_ITEMS_BY_STATUS",Re.PROCESSING_COMPLETE).length===r.items.length;l&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),t.onOnce("process-error",function(e){l({error:e,file:ge(t)}),d()});var E=r.options;t.process(mt(Tt(E.server.url,E.server.process,E.name,{chunkTransferId:t.transferId,chunkServer:E.server.patch,chunkUploads:E.chunkUploads,chunkForce:E.chunkForce,chunkSize:E.chunkSize,chunkRetryDelays:E.chunkRetryDelays})),function(r,o,l){be("PREPARE_OUTPUT",r,{query:n,item:t}).then(function(n){e("DID_PREPARE_OUTPUT",{id:t.id,file:n}),o(n)}).catch(l)})}}else r.processingQueue.push({id:t.id,success:o,failure:l})}),RETRY_ITEM_PROCESSING:Lt(r,function(t){e("REQUEST_ITEM_PROCESSING",{query:t})}),REQUEST_REMOVE_ITEM:Lt(r,function(t){bt(n("GET_BEFORE_REMOVE_FILE"),ge(t)).then(function(n){n&&e("REMOVE_ITEM",{query:t})})}),RELEASE_ITEM:Lt(r,function(e){e.release()}),REMOVE_ITEM:Lt(r,function(t,o,l,c){var f=function(){var n=t.id;Ot(r.items,n).archive(),e("DID_REMOVE_ITEM",{error:null,id:n,item:t}),At(e,r),o(ge(t))},d=r.options.server;t.origin===Oe.LOCAL&&d&&$(d.remove)&&!1!==c.remove?(e("DID_START_ITEM_REMOVE",{id:t.id}),d.remove(t.source,function(){return f()},function(n){e("DID_THROW_ITEM_REMOVE_ERROR",{id:t.id,error:ut("error",0,n,null),status:{main:St(r.options.labelFileRemoveError)(n),sub:r.options.labelTapToRetry}})})):(c.revert&&t.origin!==Oe.LOCAL&&null!==t.serverId&&t.revert(vt(r.options.server.url,r.options.server.revert),n("GET_FORCE_REVERT")),f())}),ABORT_ITEM_LOAD:Lt(r,function(e){e.abortLoad()}),ABORT_ITEM_PROCESSING:Lt(r,function(t){t.serverId?e("REVERT_ITEM_PROCESSING",{id:t.id}):t.abortProcessing().then(function(){var n=r.options.instantUpload;n&&e("REMOVE_ITEM",{query:t.id})})}),REQUEST_REVERT_ITEM_PROCESSING:Lt(r,function(t){if(r.options.instantUpload){var o=function(n){n&&e("REVERT_ITEM_PROCESSING",{query:t})},l=n("GET_BEFORE_REMOVE_FILE");if(!l)return o(!0);var c=l(ge(t));return null==c?o(!0):"boolean"==typeof c?o(c):void("function"==typeof c.then&&c.then(o))}e("REVERT_ITEM_PROCESSING",{query:t})}),REVERT_ITEM_PROCESSING:Lt(r,function(t){t.revert(vt(r.options.server.url,r.options.server.revert),n("GET_FORCE_REVERT")).then(function(){var n=r.options.instantUpload||function(e){return!gt(e.file)}(t);n&&e("REMOVE_ITEM",{query:t.id})}).catch(function(){})}),SET_OPTIONS:function(n){var r=n.options;t(r,function(t,n){e("SET_"+oe(t,"_").toUpperCase(),{value:n})})}}},wt=function(e){return e},Ct=function(e){return document.createElement(e)},text=function(e,t){var n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},Nt=function(e,t,n,r){var o=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}},Gt=function(e,t,n,r,o){var l=1;return o>r&&o-r<=.5&&(l=0),r>o&&r-o>=.5&&(l=0),function(e,t,n,r,o,l){var c=Nt(e,t,n,o),f=Nt(e,t,n,r);return["M",c.x,c.y,"A",n,n,0,l,0,f.x,f.y].join(" ")}(e,t,n,360*Math.min(.9999,r),360*Math.min(.9999,o),l)},Ut=C({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:function(e){var t=e.root,n=e.props;n.spin=!1,n.progress=0,n.opacity=0;var svg=c("svg");t.ref.path=c("path",{"stroke-width":2,"stroke-linecap":"round"}),svg.appendChild(t.ref.path),t.ref.svg=svg,t.appendChild(svg)},write:function(e){var t=e.root,n=e.props;if(0!==n.opacity){n.align&&(t.element.dataset.align=n.align);var o=parseInt(r(t.ref.path,"stroke-width"),10),l=.5*t.rect.element.width,c=0,f=0;n.spin?(c=0,f=.5):(c=0,f=n.progress);var d=Gt(l,l,l-o,c,f);r(t.ref.path,"d",d),r(t.ref.path,"stroke-opacity",n.spin||n.progress>0?1:0)}},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Bt=C({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:function(e){var t=e.root,n=e.props;t.element.innerHTML=(n.icon||"")+"<span>"+n.label+"</span>",n.isDisabled=!1},write:function(e){var t=e.root,n=e.props,o=n.isDisabled,l=t.query("GET_DISABLED")||0===n.opacity;l&&!o?(n.isDisabled=!0,r(t.element,"disabled","disabled")):!l&&o&&(n.isDisabled=!1,t.element.removeAttribute("disabled"))}}),qt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",base=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;e=Math.round(Math.abs(e));var n=base,r=base*base,o=base*base*base;return e<n?e+" bytes":e<r?Math.floor(e/n)+" KB":e<o?Vt(e/r,1,t)+" MB":Vt(e/o,2,t)+" GB"},Vt=function(e,t,n){return e.toFixed(t).split(".").filter(function(e){return"0"!==e}).join(n)},xt=function(e){var t=e.root,n=e.props;text(t.ref.fileSize,qt(t.query("GET_ITEM_SIZE",n.id),".",t.query("GET_FILE_SIZE_BASE"))),text(t.ref.fileName,wt(t.query("GET_ITEM_NAME",n.id)))},Ft=function(e){var t=e.root,n=e.props;z(t.query("GET_ITEM_SIZE",n.id))||text(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},Yt=C({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:N({DID_LOAD_ITEM:xt,DID_UPDATE_ITEM_META:xt,DID_THROW_ITEM_LOAD_ERROR:Ft,DID_THROW_ITEM_INVALID:Ft}),didCreateView:function(e){Pe("CREATE_VIEW",Object.assign({},e,{view:e}))},create:function(e){var t=e.root,n=e.props,o=Ct("span");o.className="filepond--file-info-main",r(o,"aria-hidden","true"),t.appendChild(o),t.ref.fileName=o;var l=Ct("span");l.className="filepond--file-info-sub",t.appendChild(l),t.ref.fileSize=l,text(l,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),text(o,wt(t.query("GET_ITEM_NAME",n.id)))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),jt=function(e){return Math.round(100*e)},kt=function(e){var t=e.root,n=e.action,title=null===n.progress?t.query("GET_LABEL_FILE_LOADING"):t.query("GET_LABEL_FILE_LOADING")+" "+jt(n.progress)+"%";text(t.ref.main,title),text(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},Ht=function(e){var t=e.root;text(t.ref.main,""),text(t.ref.sub,"")},Xt=function(e){var t=e.root,n=e.action;text(t.ref.main,n.status.main),text(t.ref.sub,n.status.sub)},Wt=C({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:N({DID_LOAD_ITEM:Ht,DID_REVERT_ITEM_PROCESSING:Ht,DID_REQUEST_ITEM_PROCESSING:function(e){var t=e.root;text(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),text(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:function(e){var t=e.root;text(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),text(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:function(e){var t=e.root;text(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),text(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(e){var t=e.root,n=e.action,title=null===n.progress?t.query("GET_LABEL_FILE_PROCESSING"):t.query("GET_LABEL_FILE_PROCESSING")+" "+jt(n.progress)+"%";text(t.ref.main,title),text(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:kt,DID_THROW_ITEM_LOAD_ERROR:Xt,DID_THROW_ITEM_INVALID:Xt,DID_THROW_ITEM_PROCESSING_ERROR:Xt,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Xt,DID_THROW_ITEM_REMOVE_ERROR:Xt}),didCreateView:function(e){Pe("CREATE_VIEW",Object.assign({},e,{view:e}))},create:function(e){var t=e.root,main=Ct("span");main.className="filepond--file-status-main",t.appendChild(main),t.ref.main=main;var sub=Ct("span");sub.className="filepond--file-status-sub",t.appendChild(sub),t.ref.sub=sub,kt({root:t,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),zt={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Qt=[];t(zt,function(e){Qt.push(e)});var $t,Zt=function(e){var t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Kt=function(e){var t=e.ref.buttonAbortItemLoad.rect.element;return t.width},Jt=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.height/4)},en=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.left/2)},tn=function(e){return e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION")},nn={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:function(e){return e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}},processProgressIndicator:{opacity:0,align:function(e){return e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},rn={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Zt},status:{translateX:Zt}},on={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},an={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Zt},status:{translateX:Zt,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Zt},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:tn},info:{translateX:Zt},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:tn},buttonRemoveItem:{opacity:1},info:{translateX:Zt},status:{opacity:1,translateX:Zt}},DID_LOAD_ITEM:rn,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Zt},status:{translateX:Zt}},DID_START_ITEM_PROCESSING:on,DID_REQUEST_ITEM_PROCESSING:on,DID_UPDATE_ITEM_PROCESS_PROGRESS:on,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Zt}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Zt},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:rn},sn=C({create:function(e){var t=e.root;t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),un=N({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function(e){var t=e.root,n=e.action;t.ref.buttonAbortItemProcessing.label=n.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function(e){var t=e.root,n=e.action;t.ref.buttonAbortItemLoad.label=n.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function(e){var t=e.root,n=e.action;t.ref.buttonAbortItemRemoval.label=n.value},DID_REQUEST_ITEM_PROCESSING:function(e){var t=e.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function(e){var t=e.root;t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function(e){var t=e.root;t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function(e){var t=e.root,n=e.action;t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=n.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(e){var t=e.root,n=e.action;t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=n.progress}}),ln=C({create:function(e){var n,r=e.root,o=e.props.id,l=r.query("GET_ALLOW_REVERT"),c=r.query("GET_ALLOW_REMOVE"),f=r.query("GET_ALLOW_PROCESS"),d=r.query("GET_INSTANT_UPLOAD"),E=r.query("IS_ASYNC"),_=r.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");E?f&&!l?n=function(e){return!/RevertItemProcessing/.test(e)}:!f&&l?n=function(e){return!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(e)}:f||l||(n=function(e){return!/Process/.test(e)}):n=function(e){return!/Process/.test(e)};var T=n?Qt.filter(n):Qt.concat();if(d&&l&&(zt.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",zt.RevertItemProcessing.icon="GET_ICON_REMOVE"),E&&!l){var map=an.DID_COMPLETE_ITEM_PROCESSING;map.info.translateX=en,map.info.translateY=Jt,map.status.translateY=Jt,map.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(E&&!f&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(function(e){an[e].status.translateY=Jt}),an.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Kt),_&&l){zt.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";var v=an.DID_COMPLETE_ITEM_PROCESSING;v.info.translateX=Zt,v.status.translateY=Jt,v.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}c||(zt.RemoveItem.disabled=!0),t(zt,function(e,t){var n=r.createChildView(Bt,{label:r.query(t.label),icon:r.query(t.icon),opacity:0});T.includes(e)&&r.appendChildView(n),t.disabled&&(n.element.setAttribute("disabled","disabled"),n.element.setAttribute("hidden","hidden")),n.element.dataset.align=r.query("GET_STYLE_"+t.align),n.element.classList.add(t.className),n.on("click",function(e){e.stopPropagation(),t.disabled||r.dispatch(t.action,{query:o})}),r.ref["button"+e]=n}),r.ref.processingCompleteIndicator=r.appendChildView(r.createChildView(sn)),r.ref.processingCompleteIndicator.element.dataset.align=r.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),r.ref.info=r.appendChildView(r.createChildView(Yt,{id:o})),r.ref.status=r.appendChildView(r.createChildView(Wt,{id:o}));var I=r.appendChildView(r.createChildView(Ut,{opacity:0,align:r.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));I.element.classList.add("filepond--load-indicator"),r.ref.loadProgressIndicator=I;var m=r.appendChildView(r.createChildView(Ut,{opacity:0,align:r.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));m.element.classList.add("filepond--process-indicator"),r.ref.processProgressIndicator=m,r.ref.activeStyles=[]},write:function(e){var n=e.root,r=e.actions,o=e.props;un({root:n,actions:r,props:o});var l=r.concat().filter(function(e){return/^DID_/.test(e.type)}).reverse().find(function(e){return an[e.type]});if(l){n.ref.activeStyles=[];var c=an[l.type];t(nn,function(e,r){var o=n.ref[e];t(r,function(t,r){var l=c[e]&&void 0!==c[e][t]?c[e][t]:r;n.ref.activeStyles.push({control:o,key:t,value:l})})})}n.ref.activeStyles.forEach(function(e){var t=e.control,r=e.key,o=e.value;t[r]="function"==typeof o?o(n):o})},didCreateView:function(e){Pe("CREATE_VIEW",Object.assign({},e,{view:e}))},name:"file"}),cn=C({create:function(e){var t=e.root,n=e.props;t.ref.fileName=Ct("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(ln,{id:n.id})),t.ref.data=!1},ignoreRect:!0,write:N({DID_LOAD_ITEM:function(e){var t=e.root,n=e.props;text(t.ref.fileName,wt(t.query("GET_ITEM_NAME",n.id)))}}),didCreateView:function(e){Pe("CREATE_VIEW",Object.assign({},e,{view:e}))},tag:"fieldset",name:"file-wrapper"}),fn={type:"spring",damping:.6,mass:7},dn=function(e,section,t){var n=C({name:"panel-"+section.name+" filepond--"+t,mixins:section.mixins,ignoreRectUpdate:!0}),view=e.createChildView(n,section.props);e.ref[section.name]=e.appendChildView(view)},pn=C({name:"panel",read:function(e){var t=e.root,n=e.props;return n.heightCurrent=t.ref.bottom.translateY},write:function(e){var t=e.root,n=e.props;if(null!==t.ref.scalable&&n.scalable===t.ref.scalable||(t.ref.scalable=!Y(n.scalable)||n.scalable,t.element.dataset.scalable=t.ref.scalable),n.height){var r=t.ref.top.rect.element,o=t.ref.bottom.rect.element,l=Math.max(r.height+o.height,n.height);t.ref.center.translateY=r.height,t.ref.center.scaleY=(l-r.height-o.height)/100,t.ref.bottom.translateY=l-o.height}},create:function(e){var t=e.root,n=e.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:fn},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:fn},styles:["translateY"]}}].forEach(function(section){dn(t,section,n.name)}),t.element.classList.add("filepond--"+n.name),t.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),En={type:"spring",stiffness:.75,damping:.45,mass:10},_n={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Tn=N({DID_UPDATE_PANEL_HEIGHT:function(e){var t=e.root,n=e.action;t.height=n.height}}),vn=N({DID_GRAB_ITEM:function(e){var t=e.root,n=e.props;n.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:function(e){var t=e.root;t.element.dataset.dragState="drag"},DID_DROP_ITEM:function(e){var t=e.root,n=e.props;n.dragOffset=null,n.dragOrigin=null,t.element.dataset.dragState="drop"}},function(e){var t=e.root,n=e.actions,r=e.props,o=e.shouldOptimize;"drop"===t.element.dataset.dragState&&t.scaleX<=1&&(t.element.dataset.dragState="idle");var l=n.concat().filter(function(e){return/^DID_/.test(e.type)}).reverse().find(function(e){return _n[e.type]});l&&l.type!==r.currentState&&(r.currentState=l.type,t.element.dataset.filepondItemState=_n[r.currentState]||"");var c=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");c?o||(t.height=t.rect.element.width*c):(Tn({root:t,actions:n,props:r}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),o&&(t.ref.panel.height=null),t.ref.panel.height=t.height}),In=C({create:function(e){var t=e.root,n=e.props;t.ref.handleClick=function(e){return t.dispatch("DID_ACTIVATE_ITEM",{id:n.id})},t.element.id="filepond--item-"+n.id,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(cn,{id:n.id})),t.ref.panel=t.appendChildView(t.createChildView(pn,{name:"item-panel"})),t.ref.panel.height=null,n.markedForRemoval=!1,t.query("GET_ALLOW_REORDER")&&(t.element.dataset.dragState="idle",t.element.addEventListener("pointerdown",function(e){if(e.isPrimary){var r=!1,o={x:e.pageX,y:e.pageY};n.dragOrigin={x:t.translateX,y:t.translateY},n.dragCenter={x:e.offsetX,y:e.offsetY};var l,c,f,d=(l=t.query("GET_ACTIVE_ITEMS"),c=l.map(function(e){return e.id}),f=void 0,{setIndex:function(e){f=e},getIndex:function(){return f},getItemIndex:function(e){return c.indexOf(e.id)}});t.dispatch("DID_GRAB_ITEM",{id:n.id,dragState:d});var E=function(e){if(e.isPrimary){e.stopPropagation(),e.preventDefault(),n.dragOffset={x:e.pageX-o.x,y:e.pageY-o.y};var l=n.dragOffset.x*n.dragOffset.x+n.dragOffset.y*n.dragOffset.y;l>16&&!r&&(r=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:n.id,dragState:d})}};document.addEventListener("pointermove",E),document.addEventListener("pointerup",function e(l){l.isPrimary&&(document.removeEventListener("pointermove",E),document.removeEventListener("pointerup",e),n.dragOffset={x:l.pageX-o.x,y:l.pageY-o.y},t.dispatch("DID_DROP_ITEM",{id:n.id,dragState:d}),r&&setTimeout(function(){return t.element.addEventListener("click",t.ref.handleClick)},0))})}}))},write:vn,destroy:function(e){var t=e.root,n=e.props;t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:n.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:"spring",scaleY:"spring",translateX:En,translateY:En,opacity:{type:"tween",duration:150}}}}),mn=function(view,e,t){if(t){var n=view.rect.element.width,r=e.length,o=null;if(0===r||t.top<e[0].rect.element.top)return-1;var l=e[0],c=l.rect.element,f=c.marginLeft+c.marginRight,d=c.width+f,E=Math.round(n/d);if(1===E){for(var _=0;_<r;_++){var T=e[_],v=T.rect.outer.top+.5*T.rect.element.height;if(t.top<v)return _}return r}for(var I=c.marginTop+c.marginBottom,m=c.height+I,h=0;h<r;h++){var R=h%E,O=Math.floor(h/E),y=R*d,D=O*m,S=D-c.marginTop,A=y+d,P=D+m+c.marginBottom;if(t.top<P&&t.top>S){if(t.left<A)return h;o=h!==r-1?h:null}}return null!==o?o:r}},hn={height:0,width:0,get getHeight(){return this.height},set setHeight(e){0!==this.height&&0!==e||(this.height=e)},get getWidth(){return this.width},set setWidth(e){0!==this.width&&0!==e||(this.width=e)},setDimensions:function(e,t){0!==this.height&&0!==e||(this.height=e),0!==this.width&&0!==t||(this.width=t)}},gn=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(0===e.opacity&&Rn(e,t,n,r,o),e.scaleX=1,e.scaleY=1,e.opacity=1))},Rn=function(e,t,n,r,o){e.interactionMethod===se.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===se.DROP?(e.translateX=null,e.translateX=t-20*r,e.translateY=null,e.translateY=n-10*o,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===se.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===se.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},On=function(e){return e.rect.element.height+.5*e.rect.element.marginBottom+.5*e.rect.element.marginTop},yn=N({DID_ADD_ITEM:function(e){var t=e.root,n=e.action,r=n.id,o=n.index,l=n.interactionMethod;t.ref.addIndex=o;var c=Date.now(),f=c,d=1;if(l!==se.NONE){d=0;var E=t.query("GET_ITEM_INSERT_INTERVAL"),_=c-t.ref.lastItemSpanwDate;f=_<E?c+(E-_):c}t.ref.lastItemSpanwDate=f,t.appendChildView(t.createChildView(In,{spawnDate:f,id:r,opacity:d,interactionMethod:l}),o)},DID_REMOVE_ITEM:function(e){var t=e.root,n=e.action,r=n.id,view=t.childViews.find(function(e){return e.id===r});view&&(view.scaleX=.9,view.scaleY=.9,view.opacity=0,view.markedForRemoval=!0)},DID_DRAG_ITEM:function(e){var t=e.root,n=e.action,r=n.id,o=n.dragState,l=t.query("GET_ITEM",{id:r}),view=t.childViews.find(function(e){return e.id===r}),c=t.childViews.length,f=o.getItemIndex(l);if(view){var d,E={x:view.dragOrigin.x+view.dragOffset.x+view.dragCenter.x,y:view.dragOrigin.y+view.dragOffset.y+view.dragCenter.y},_=On(view),T=(d=view).rect.element.width+.5*d.rect.element.marginLeft+.5*d.rect.element.marginRight,v=Math.floor(t.rect.outer.width/T);v>c&&(v=c);var I=Math.floor(c/v+1);hn.setHeight=_*I,hn.setWidth=T*v;var m={y:Math.floor(E.y/_),x:Math.floor(E.x/T),getGridIndex:function(){return E.y>hn.getHeight||E.y<0||E.x>hn.getWidth||E.x<0?f:this.y*v+this.x},getColIndex:function(){for(var e=t.query("GET_ACTIVE_ITEMS"),n=t.childViews.filter(function(e){return e.rect.element.height}),r=e.map(function(e){return n.find(function(t){return t.id===e.id})}),o=r.findIndex(function(e){return e===view}),l=On(view),c=r.length,f=c,d=0,_=0,T=0,i=0;i<c;i++)if(d=On(r[i]),E.y<(_=(T=_)+d)){if(o>i){if(E.y<T+l){f=i;break}continue}f=i;break}return f}},h=v>1?m.getGridIndex():m.getColIndex();t.dispatch("MOVE_ITEM",{query:view,index:h});var R=o.getIndex();if(void 0===R||R!==h){if(o.setIndex(h),void 0===R)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:f,target:h})}}}}),Dn=C({create:function(e){var t=e.root;r(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},write:function(e){var t=e.root,n=e.props,r=e.actions,o=e.shouldOptimize;yn({root:t,props:n,actions:r});var l=n.dragCoordinates,c=t.rect.element.width,f=t.childViews.filter(function(e){return e.rect.element.height}),d=t.query("GET_ACTIVE_ITEMS").map(function(e){return f.find(function(t){return t.id===e.id})}).filter(function(e){return e}),E=l?mn(t,d,l):null,_=t.ref.addIndex||null;t.ref.addIndex=null;var T=0,v=0,I=0;if(0!==d.length){var m=d[0].rect.element,h=m.marginTop+m.marginBottom,R=m.marginLeft+m.marginRight,O=m.width+R,y=m.height+h,D=Math.round(c/O);if(1===D){var S=0,A=0;d.forEach(function(e,t){if(E){var n=t-E;A=-2===n?.25*-h:-1===n?.75*-h:0===n?.75*h:1===n?.25*h:0}o&&(e.translateX=null,e.translateY=null),e.markedForRemoval||gn(e,0,S+A);var r=e.rect.element.height+h,l=r*(e.markedForRemoval?e.opacity:1);S+=l})}else{var P=0,L=0;d.forEach(function(e,t){t===E&&(T=1),t===_&&(I+=1),e.markedForRemoval&&e.opacity<.5&&(v-=1);var n=t+I+T+v,r=n%D,l=Math.floor(n/D),c=r*O,f=l*y,d=Math.sign(c-P),m=Math.sign(f-L);P=c,L=f,e.markedForRemoval||(o&&(e.translateX=null,e.translateY=null),gn(e,c,f,d,m))})}}},tag:"ul",name:"list",didWriteView:function(e){var t=e.root;t.childViews.filter(function(view){return view.markedForRemoval&&0===view.opacity&&view.resting}).forEach(function(view){view._destroy(),t.removeChildView(view)})},filterFrameActionsForChild:function(e,t){return t.filter(function(t){return!t.data||!t.data.id||e.id===t.data.id})},mixins:{apis:["dragCoordinates"]}}),Sn=N({DID_DRAG:function(e){var t=e.root,n=e.props,r=e.action;t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(n.dragCoordinates={left:r.position.scopeLeft-t.ref.list.rect.element.left,top:r.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},DID_END_DRAG:function(e){var t=e.props;t.dragCoordinates=null}}),An=C({create:function(e){var t=e.root,n=e.props;t.ref.list=t.appendChildView(t.createChildView(Dn)),n.dragCoordinates=null,n.overflowing=!1},write:function(e){var t=e.root,n=e.props,r=e.actions;if(Sn({root:t,props:n,actions:r}),t.ref.list.dragCoordinates=n.dragCoordinates,n.overflowing&&!n.overflow&&(n.overflowing=!1,t.element.dataset.state="",t.height=null),n.overflow){var o=Math.round(n.overflow);o!==t.height&&(n.overflowing=!0,t.element.dataset.state="overflow",t.height=o)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),bn=function(element,e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";t?r(element,e,n):element.removeAttribute(e)},Pn=function(e){var t=e.root,n=e.action;t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&bn(t.element,"accept",!!n.value,n.value?n.value.join(","):"")},Ln=function(e){var t=e.root,n=e.action;bn(t.element,"multiple",n.value)},Mn=function(e){var t=e.root,n=e.action;bn(t.element,"webkitdirectory",n.value)},wn=function(e){var t=e.root,n=t.query("GET_DISABLED"),r=t.query("GET_ALLOW_BROWSE"),o=n||!r;bn(t.element,"disabled",o)},Cn=function(e){var t=e.root,n=e.action;n.value?0===t.query("GET_TOTAL_ITEMS")&&bn(t.element,"required",!0):bn(t.element,"required",!1)},Nn=function(e){var t=e.root,n=e.action;bn(t.element,"capture",!!n.value,!0===n.value?"":n.value)},Gn=function(e){var t=e.root,element=t.element;if(t.query("GET_TOTAL_ITEMS")>0)bn(element,"required",!1),bn(element,"name",!1);else{bn(element,"name",!0,t.query("GET_NAME"));var n=t.query("GET_CHECK_VALIDITY");n&&element.setCustomValidity(""),t.query("GET_REQUIRED")&&bn(element,"required",!0)}},Un=C({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:function(e){var t=e.root,n=e.props;t.element.id="filepond--browser-"+n.id,r(t.element,"name",t.query("GET_NAME")),r(t.element,"aria-controls","filepond--assistant-"+n.id),r(t.element,"aria-labelledby","filepond--drop-label-"+n.id),Pn({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),Ln({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),Mn({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),wn({root:t}),Cn({root:t,action:{value:t.query("GET_REQUIRED")}}),Nn({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=function(e){if(t.element.value){var r=Array.from(t.element.files).map(function(e){return e._relativePath=e.webkitRelativePath,e});setTimeout(function(){n.onload(r),function(input){if(input&&""!==input.value){try{input.value=""}catch(e){}if(input.value){var form=Ct("form"),e=input.parentNode,t=input.nextSibling;form.appendChild(input),form.reset(),t?e.insertBefore(input,t):e.appendChild(input)}}}(t.element)},250)}},t.element.addEventListener("change",t.ref.handleChange)},destroy:function(e){var t=e.root;t.element.removeEventListener("change",t.ref.handleChange)},write:N({DID_LOAD_ITEM:Gn,DID_REMOVE_ITEM:Gn,DID_THROW_ITEM_INVALID:function(e){var t=e.root,n=t.query("GET_CHECK_VALIDITY");n&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:wn,DID_SET_ALLOW_BROWSE:wn,DID_SET_ALLOW_DIRECTORIES_ONLY:Mn,DID_SET_ALLOW_MULTIPLE:Ln,DID_SET_ACCEPTED_FILE_TYPES:Pn,DID_SET_CAPTURE_METHOD:Nn,DID_SET_REQUIRED:Cn})}),Bn={ENTER:13,SPACE:32},qn=function(label,e){label.innerHTML=e;var t=label.querySelector(".filepond--label-action");return t&&r(t,"tabindex","0"),e},Vn=C({name:"drop-label",ignoreRect:!0,create:function(e){var t=e.root,n=e.props,label=Ct("label");r(label,"for","filepond--browser-"+n.id),r(label,"id","filepond--drop-label-"+n.id),r(label,"aria-hidden","true"),t.ref.handleKeyDown=function(e){var n=e.keyCode===Bn.ENTER||e.keyCode===Bn.SPACE;n&&(e.preventDefault(),t.ref.label.click())},t.ref.handleClick=function(e){var n=e.target===label||label.contains(e.target);n||t.ref.label.click()},label.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),qn(label,n.caption),t.appendChild(label),t.ref.label=label},destroy:function(e){var t=e.root;t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:N({DID_SET_LABEL_IDLE:function(e){var t=e.root,n=e.action;qn(t.ref.label,n.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),xn=C({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Fn=N({DID_DRAG:function(e){var t=e.root,n=e.action;t.ref.blob?(t.ref.blob.translateX=n.position.scopeLeft,t.ref.blob.translateY=n.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1):function(e){var t=e.root,n=.5*t.rect.element.width,r=.5*t.rect.element.height;t.ref.blob=t.appendChildView(t.createChildView(xn,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:n,translateY:r}))}({root:t})},DID_DROP:function(e){var t=e.root;t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},DID_END_DRAG:function(e){var t=e.root;t.ref.blob&&(t.ref.blob.opacity=0)}}),Yn=C({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:function(e){var t=e.root,n=e.props,r=e.actions;Fn({root:t,props:n,actions:r});var o=t.ref.blob;0===r.length&&o&&0===o.opacity&&(t.removeChildView(o),t.ref.blob=null)}}),jn=function(e,t){return e.ref.fields[t]},kn=function(e){e.query("GET_ACTIVE_ITEMS").forEach(function(t){e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},Hn=function(e){var t=e.root;return kn(t)},Xn=N({DID_SET_DISABLED:function(e){var t=e.root;t.element.disabled=t.query("GET_DISABLED")},DID_ADD_ITEM:function(e){var t=e.root,n=e.action,r=Ct("input");r.type="hidden",r.name=t.query("GET_NAME"),r.disabled=t.query("GET_DISABLED"),t.ref.fields[n.id]=r,kn(t)},DID_LOAD_ITEM:function(e){var t=e.root,n=e.action,r=jn(t,n.id);r&&null!==n.serverFileReference&&(r.value=n.serverFileReference)},DID_REMOVE_ITEM:function(e){var t=e.root,n=e.action,r=jn(t,n.id);r&&(r.parentNode&&r.parentNode.removeChild(r),delete t.ref.fields[n.id])},DID_DEFINE_VALUE:function(e){var t=e.root,n=e.action,r=jn(t,n.id);r&&(null===n.value?r.removeAttribute("value"):r.value=n.value,kn(t))},DID_REORDER_ITEMS:Hn,DID_SORT_ITEMS:Hn}),data=C({tag:"fieldset",name:"data",create:function(e){return e.root.ref.fields={}},write:Xn,ignoreRect:!0}),Wn=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],zn=["css","csv","html","txt"],map={zip:"zip|compressed",epub:"application/epub+zip"},Qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=e.toLowerCase(),Wn.includes(e)?"image/"+("jpg"===e?"jpeg":"svg"===e?"svg+xml":e):zn.includes(e)?"text/"+e:map[e]||""},$n=function(e){return new Promise(function(t,n){var r=sr(e);if(r.length&&!Zn(e))return t(r);Kn(e).then(t)})},Zn=function(e){return!!e.files&&e.files.length>0},Kn=function(e){return new Promise(function(t,n){var r=(e.items?Array.from(e.items):[]).filter(function(e){return Jn(e)}).map(function(e){return er(e)});r.length?Promise.all(r).then(function(e){var n=[];e.forEach(function(e){n.push.apply(n,e)}),t(n.filter(function(e){return e}).map(function(e){return e._relativePath||(e._relativePath=e.webkitRelativePath),e}))}).catch(console.error):t(e.files?Array.from(e.files):[])})},Jn=function(e){if(ir(e)){var t=ar(e);if(t)return t.isFile||t.isDirectory}return"file"===e.kind},er=function(e){return new Promise(function(t,n){or(e)?nr(ar(e)).then(t).catch(n):t([e.getAsFile()])})},nr=function(e){return new Promise(function(t,n){var r=[],o=0,l=0,c=function(){0===l&&0===o&&t(r)};!function e(t){o++;var f=t.createReader();!function t(){f.readEntries(function(n){if(0===n.length)return o--,void c();n.forEach(function(t){t.isDirectory?e(t):(l++,t.file(function(e){var n=rr(e);t.fullPath&&(n._relativePath=t.fullPath),r.push(n),l--,c()}))}),t()},n)}()}(e)})},rr=function(e){if(e.type.length)return e;var t=e.lastModifiedDate,n=e.name,r=Qn(We(e.name));return r.length?((e=e.slice(0,e.size,r)).name=n,e.lastModifiedDate=t,e):e},or=function(e){return ir(e)&&(ar(e)||{}).isDirectory},ir=function(e){return"webkitGetAsEntry"in e},ar=function(e){return e.webkitGetAsEntry()},sr=function(e){var t=[];try{if((t=lr(e)).length)return t;t=ur(e)}catch(e){}return t},ur=function(e){var data=e.getData("url");return"string"==typeof data&&data.length?[data]:[]},lr=function(e){var data=e.getData("text/html");if("string"==typeof data&&data.length){var t=data.match(/src\s*=\s*"(.+?)"/);if(t)return[t[1]]}return[]},cr=[],fr=function(e){return{pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}},dr=function(element){var e=cr.find(function(e){return e.element===element});if(e)return e;var t=pr(element);return cr.push(t),t},pr=function(element){var e=[],n={dragenter:vr,dragover:Ir,dragleave:gr,drop:mr},r={};t(n,function(t,n){r[t]=n(element,e),element.addEventListener(t,r[t],!1)});var o={element:element,addListener:function(l){return e.push(l),function(){e.splice(e.indexOf(l),1),0===e.length&&(cr.splice(cr.indexOf(o),1),t(n,function(e){element.removeEventListener(e,r[e],!1)}))}}};return o},Er=function(e,t){var element,n="getRootNode"in(element=t)?element.getRootNode():document,r=function(e,t){return"elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)}(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)},_r=null,Tr=function(e,t){try{e.dropEffect=t}catch(e){}},vr=function(e,t){return function(e){e.preventDefault(),_r=e.target,t.forEach(function(t){var element=t.element,n=t.onenter;Er(e,element)&&(t.state="enter",n(fr(e)))})}},Ir=function(e,t){return function(e){e.preventDefault();var n=e.dataTransfer;$n(n).then(function(r){var o=!1;t.some(function(t){var l=t.filterElement,element=t.element,c=t.onenter,f=t.onexit,d=t.ondrag,E=t.allowdrop;Tr(n,"copy");var _=E(r);if(_)if(Er(e,element)){if(o=!0,null===t.state)return t.state="enter",void c(fr(e));if(t.state="over",l&&!_)return void Tr(n,"none");d(fr(e))}else l&&!o&&Tr(n,"none"),t.state&&(t.state=null,f(fr(e)));else Tr(n,"none")})})}},mr=function(e,t){return function(e){e.preventDefault();var n=e.dataTransfer;$n(n).then(function(n){t.forEach(function(t){var r=t.filterElement,element=t.element,o=t.ondrop,l=t.onexit,c=t.allowdrop;if(t.state=null,!r||Er(e,element))return c(n)?void o(fr(e),n):l(fr(e))})})}},gr=function(e,t){return function(e){_r===e.target&&t.forEach(function(t){var n=t.onexit;t.state=null,n(fr(e))})}},Rr=function(e,t,n){e.classList.add("filepond--hopper");var r=n.catchesDropsOnPage,o=n.requiresDropOnElement,l=n.filterItems,c=void 0===l?function(e){return e}:l,f=function(element,e,t){var n=dr(e),r={element:element,filterElement:t,state:null,ondrop:function(){},onenter:function(){},ondrag:function(){},onexit:function(){},onload:function(){},allowdrop:function(){}};return r.destroy=n.addListener(r),r}(e,r?document.documentElement:e,o),d="",E="";f.allowdrop=function(e){return t(c(e))},f.ondrop=function(e,n){var r=c(n);t(r)?(E="drag-drop",_.onload(r,e)):_.ondragend(e)},f.ondrag=function(e){_.ondrag(e)},f.onenter=function(e){E="drag-over",_.ondragstart(e)},f.onexit=function(e){E="drag-exit",_.ondragend(e)};var _={updateHopperState:function(){d!==E&&(e.dataset.hopperState=E,d=E)},onload:function(){},ondragstart:function(){},ondrag:function(){},ondragend:function(){},destroy:function(){f.destroy()}};return _},Or=!1,yr=[],Dr=function(e){var t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){for(var n=!1,element=t;element!==document.body;){if(element.classList.contains("filepond--root")){n=!0;break}element=element.parentNode}if(!n)return}$n(e.clipboardData).then(function(e){e.length&&yr.forEach(function(t){return t(e)})})},Sr=function(){var e=function(e){t.onload(e)},t={destroy:function(){var t;t=e,ve(yr,yr.indexOf(t)),0===yr.length&&(document.removeEventListener("paste",Dr),Or=!1)},onload:function(){}};return function(e){yr.includes(e)||(yr.push(e),Or||(Or=!0,document.addEventListener("paste",Dr)))}(e),t},Ar=null,Pr=null,Lr=[],Mr=function(e,t){e.element.textContent=t},wr=function(e,t,label){var n=e.query("GET_TOTAL_ITEMS");Mr(e,label+" "+t+", "+n+" "+(1===n?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL"))),clearTimeout(Pr),Pr=setTimeout(function(){!function(e){e.element.textContent=""}(e)},1500)},Cr=function(e){return e.element.parentNode.contains(document.activeElement)},Nr=function(e){var t=e.root,n=e.action,r=t.query("GET_ITEM",n.id),o=r.filename,label=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");Mr(t,o+" "+label)},Gr=function(e){var t=e.root,n=e.action,r=t.query("GET_ITEM",n.id),o=r.filename;Mr(t,n.status.main+" "+o+" "+n.status.sub)},Ur=C({create:function(e){var t=e.root,n=e.props;t.element.id="filepond--assistant-"+n.id,r(t.element,"role","status"),r(t.element,"aria-live","polite"),r(t.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:N({DID_LOAD_ITEM:function(e){var t=e.root,n=e.action;if(Cr(t)){t.element.textContent="";var r=t.query("GET_ITEM",n.id);Lr.push(r.filename),clearTimeout(Ar),Ar=setTimeout(function(){wr(t,Lr.join(", "),t.query("GET_LABEL_FILE_ADDED")),Lr.length=0},750)}},DID_REMOVE_ITEM:function(e){var t=e.root,n=e.action;if(Cr(t)){var r=n.item;wr(t,r.filename,t.query("GET_LABEL_FILE_REMOVED"))}},DID_COMPLETE_ITEM_PROCESSING:function(e){var t=e.root,n=e.action,r=t.query("GET_ITEM",n.id),o=r.filename,label=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Mr(t,o+" "+label)},DID_ABORT_ITEM_PROCESSING:Nr,DID_REVERT_ITEM_PROCESSING:Nr,DID_THROW_ITEM_REMOVE_ERROR:Gr,DID_THROW_ITEM_LOAD_ERROR:Gr,DID_THROW_ITEM_INVALID:Gr,DID_THROW_ITEM_PROCESSING_ERROR:Gr}),tag:"span",name:"assistant"}),Br=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(new RegExp(t+".","g"),function(sub){return sub.charAt(1).toUpperCase()})},qr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Date.now(),o=null;return function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];clearTimeout(o);var d=Date.now()-r,E=function(){r=Date.now(),e.apply(void 0,c)};d<t?n||(o=setTimeout(E,t-d)):E()}},Vr=function(e){return e.preventDefault()},xr=function(e){var t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Fr=function(e){var t=0,n=0,r=e.ref.list,o=r.childViews[0],l=o.childViews.filter(function(e){return e.rect.element.height}),c=e.query("GET_ACTIVE_ITEMS").map(function(e){return l.find(function(t){return t.id===e.id})}).filter(function(e){return e});if(0===c.length)return{visual:t,bounds:n};var f=o.rect.element.width,d=mn(o,c,r.dragCoordinates),E=c[0].rect.element,_=E.marginTop+E.marginBottom,T=E.marginLeft+E.marginRight,v=E.width+T,I=E.height+_,m=void 0!==d&&d>=0?1:0,h=c.find(function(e){return e.markedForRemoval&&e.opacity<.45})?-1:0,R=c.length+m+h,O=Math.round(f/v);return 1===O?c.forEach(function(e){var r=e.rect.element.height+_;n+=r,t+=r*e.opacity}):(n=Math.ceil(R/O)*I,t=n),{visual:t,bounds:n}},Yr=function(e){var t=e.ref.measureHeight||null,n=parseInt(e.style.maxHeight,10)||null,r=0===t?null:t;return{cappedHeight:n,fixedHeight:r}},jr=function(e,t){var n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),o=e.query("GET_TOTAL_ITEMS"),l=e.query("GET_MAX_FILES"),c=t.length;if(!r&&c>1)return!0;var f=z(l=r?l:n?l:1);return!!(f&&o+c>l)&&(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:ut("warning",0,"Max files")}),!0)},kr=function(e,t,n){var r=e.childViews[0];return mn(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Hr=function(e){var t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){var o=Rr(e.element,function(t){var n=e.query("GET_BEFORE_DROP_FILE")||function(){return!0},r=e.query("GET_DROP_VALIDATION");return!r||t.every(function(t){return Pe("ALLOW_HOPPER_ITEM",t,{query:e.query}).every(function(e){return!0===e})&&n(t)})},{filterItems:function(t){var n=e.query("GET_IGNORED_FILES");return t.filter(function(e){return!gt(e)||!n.includes(e.name.toLowerCase())})},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});o.onload=function(t,n){var r=e.ref.list.childViews[0],o=r.childViews.filter(function(e){return e.rect.element.height}),l=e.query("GET_ACTIVE_ITEMS").map(function(e){return o.find(function(t){return t.id===e.id})}).filter(function(e){return e});be("ADD_ITEMS",t,{dispatch:e.dispatch}).then(function(t){if(jr(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:kr(e.ref.list,l,n),interactionMethod:se.DROP})}),e.dispatch("DID_DROP",{position:n}),e.dispatch("DID_END_DRAG",{position:n})},o.ondragstart=function(t){e.dispatch("DID_START_DRAG",{position:t})},o.ondrag=qr(function(t){e.dispatch("DID_DRAG",{position:t})}),o.ondragend=function(t){e.dispatch("DID_END_DRAG",{position:t})},e.ref.hopper=o,e.ref.drip=e.appendChildView(e.createChildView(Yn))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Xr=function(e,t){var n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),o=n&&!r;o&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Un,Object.assign({},t,{onload:function(t){be("ADD_ITEMS",t,{dispatch:e.dispatch}).then(function(t){if(jr(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:se.BROWSE})})}})),0):!o&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Wr=function(e){var t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=Sr(),e.ref.paster.onload=function(t){be("ADD_ITEMS",t,{dispatch:e.dispatch}).then(function(t){if(jr(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:se.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},zr=N({DID_SET_ALLOW_BROWSE:function(e){var t=e.root,n=e.props;Xr(t,n)},DID_SET_ALLOW_DROP:function(e){var t=e.root;Hr(t)},DID_SET_ALLOW_PASTE:function(e){var t=e.root;Wr(t)},DID_SET_DISABLED:function(e){var t=e.root,n=e.props;Hr(t),Wr(t),Xr(t,n);var r=t.query("GET_DISABLED");r?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),Qr=C({name:"root",read:function(e){var t=e.root;t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:function(e){var t=e.root,n=e.props,r=t.query("GET_ID");r&&(t.element.id=r);var o=t.query("GET_CLASS_NAME");o&&o.split(" ").filter(function(e){return e.length}).forEach(function(e){t.element.classList.add(e)}),t.ref.label=t.appendChildView(t.createChildView(Vn,Object.assign({},n,{translateY:null,caption:t.query("GET_LABEL_IDLE")}))),t.ref.list=t.appendChildView(t.createChildView(An,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(pn,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(Ur,Object.assign({},n))),t.ref.data=t.appendChildView(t.createChildView(data,Object.assign({},n))),t.ref.measure=Ct("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(function(style){return!V(style.value)}).map(function(e){var n=e.name,r=e.value;t.element.dataset[n]=r}),t.ref.widthPrevious=null,t.ref.widthUpdated=qr(function(){t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];var l=window.matchMedia("(pointer: fine) and (hover: hover)").matches,c="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&c&&!l&&(t.element.addEventListener("touchmove",Vr,{passive:!1}),t.element.addEventListener("gesturestart",Vr));var f=t.query("GET_CREDITS");if(2===f.length){var d=document.createElement("a");d.className="filepond--credits",d.setAttribute("aria-hidden","true"),d.href=f[0],d.tabindex=-1,d.target="_blank",d.rel="noopener noreferrer",d.textContent=f[1],t.element.appendChild(d),t.ref.credits=d}},write:function(e){var t=e.root,n=e.props,r=e.actions;if(zr({root:t,props:n,actions:r}),r.filter(function(e){return/^DID_SET_STYLE_/.test(e.type)}).filter(function(e){return!V(e.data.value)}).map(function(e){var n=e.type,data=e.data,r=Br(n.substr(8).toLowerCase(),"_");t.element.dataset[r]=data.value,t.invalidateLayout()}),!t.rect.element.hidden){t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());var o=t.ref.bounds;o||(o=t.ref.bounds=Yr(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);var l=t.ref,c=l.hopper,label=l.label,f=l.list,d=l.panel;c&&c.updateHopperState();var E=t.query("GET_PANEL_ASPECT_RATIO"),_=t.query("GET_ALLOW_MULTIPLE"),T=t.query("GET_TOTAL_ITEMS"),v=_?t.query("GET_MAX_FILES")||1e6:1,I=T===v,m=r.find(function(e){return"DID_ADD_ITEM"===e.type});if(I&&m){var h=m.data.interactionMethod;label.opacity=0,_?label.translateY=-40:h===se.API?label.translateX=40:label.translateY=h===se.BROWSE?40:30}else I||(label.opacity=1,label.translateX=0,label.translateY=0);var R=xr(t),O=Fr(t),y=label.rect.element.height,D=!_||I?0:y,S=I?f.rect.element.marginTop:0,A=0===T?0:f.rect.element.marginBottom,P=D+S+O.visual+A,L=D+S+O.bounds+A;if(f.translateY=Math.max(0,D-f.rect.element.marginTop)-R.top,E){var M=t.rect.element.width,w=M*E;E!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=E,t.ref.updateHistory=[]);var C=t.ref.updateHistory;if(C.push(M),C.length>4)for(var N=C.length,G=N-10,U=0,i=N;i>=G;i--)if(C[i]===C[i-2]&&U++,U>=2)return;d.scalable=!1,d.height=w;var B=w-D-(A-R.bottom)-(I?S:0);O.visual>B?f.overflow=B:f.overflow=null,t.height=w}else if(o.fixedHeight){d.scalable=!1;var x=o.fixedHeight-D-(A-R.bottom)-(I?S:0);O.visual>x?f.overflow=x:f.overflow=null}else if(o.cappedHeight){var F=P>=o.cappedHeight,Y=Math.min(o.cappedHeight,P);d.scalable=!0,d.height=F?Y:Y-R.top-R.bottom;var j=Y-D-(A-R.bottom)-(I?S:0);P>o.cappedHeight&&O.visual>j?f.overflow=j:f.overflow=null,t.height=Math.min(o.cappedHeight,L-R.top-R.bottom)}else{var k=T>0?R.top+R.bottom:0;d.scalable=!0,d.height=Math.max(y,P-k),t.height=Math.max(y,L-k)}t.ref.credits&&d.heightCurrent&&(t.ref.credits.style.transform="translateY("+d.heightCurrent+"px)")}},destroy:function(e){var t=e.root;t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",Vr),t.element.removeEventListener("gesturestart",Vr)},mixins:{styles:["height"]}}),$r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null,o=Me(),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Object.assign({},e),o=[],l=[],c=function(e,data,t){!t||document.hidden?(_[e]&&_[e](data),o.push({type:e,data:data})):l.push({type:e,data:data})},f=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return E[e]?(t=E)[e].apply(t,r):null},d={getState:function(){return Object.assign({},r)},processActionQueue:function(){var e=[].concat(o);return o.length=0,e},processDispatchQueue:function(){var e=[].concat(l);l.length=0,e.forEach(function(e){var t=e.type,data=e.data;c(t,data)})},dispatch:c,query:f},E={};t.forEach(function(e){E=Object.assign({},e(r),{},E)});var _={};return n.forEach(function(e){_=Object.assign({},e(c,f,r),{},_)}),d}({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:re(o)},[je,ae(o)],[Mt,ie(o)]);l.dispatch("SET_OPTIONS",{options:e});var c=function(){document.hidden||l.dispatch("KICK")};document.addEventListener("visibilitychange",c);var f=null,d=!1,E=!1,_=null,T=null,v=function(){d||(d=!0),clearTimeout(f),f=setTimeout(function(){d=!1,_=null,T=null,E&&(E=!1,l.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",v);var view=Qr(l,{id:ue()}),I=!1,m=!1,R={_read:function(){d&&(T=window.innerWidth,_||(_=T),E||T===_||(l.dispatch("DID_START_RESIZE"),E=!0)),m&&I&&(I=null===view.element.offsetParent),I||(view._read(),m=view.rect.element.hidden)},_write:function(e){var t,n=l.processActionQueue().filter(function(e){return!/^SET_/.test(e.type)});I&&!n.length||(S(n),I=view._write(e,n,E),(t=l.query("GET_ITEMS")).forEach(function(e,n){e.released&&ve(t,n)}),I&&l.processDispatchQueue())}},O=function(e){return function(data){var t={type:e};if(!data)return t;if(data.hasOwnProperty("error")&&(t.error=data.error?Object.assign({},data.error):null),data.status&&(t.status=Object.assign({},data.status)),data.file&&(t.output=data.file),data.source)t.file=data.source;else if(data.item||data.id){var n=data.item?data.item:l.query("GET_ITEM",data.id);t.file=n?ge(n):null}return data.items&&(t.items=data.items.map(ge)),/progress/.test(e)&&(t.progress=data.progress),data.hasOwnProperty("origin")&&data.hasOwnProperty("target")&&(t.origin=data.origin,t.target=data.target),t}},y={DID_DESTROY:O("destroy"),DID_INIT:O("init"),DID_THROW_MAX_FILES:O("warning"),DID_INIT_ITEM:O("initfile"),DID_START_ITEM_LOAD:O("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:O("addfileprogress"),DID_LOAD_ITEM:O("addfile"),DID_THROW_ITEM_INVALID:[O("error"),O("addfile")],DID_THROW_ITEM_LOAD_ERROR:[O("error"),O("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[O("error"),O("removefile")],DID_PREPARE_OUTPUT:O("preparefile"),DID_START_ITEM_PROCESSING:O("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:O("processfileprogress"),DID_ABORT_ITEM_PROCESSING:O("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:O("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:O("processfiles"),DID_REVERT_ITEM_PROCESSING:O("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[O("error"),O("processfile")],DID_REMOVE_ITEM:O("removefile"),DID_UPDATE_ITEMS:O("updatefiles"),DID_ACTIVATE_ITEM:O("activatefile"),DID_REORDER_ITEMS:O("reorderfiles")},D=function(e){var t=Object.assign({pond:C},e);delete t.type,view.element.dispatchEvent(new CustomEvent("FilePond:"+e.type,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));var n=[];e.hasOwnProperty("error")&&n.push(e.error),e.hasOwnProperty("file")&&n.push(e.file);var r=["type","error","file"];Object.keys(e).filter(function(e){return!r.includes(e)}).forEach(function(t){return n.push(e[t])}),C.fire.apply(C,[e.type].concat(n));var o=l.query("GET_ON"+e.type.toUpperCase());o&&o.apply(void 0,n)},S=function(e){e.length&&e.filter(function(e){return y[e.type]}).forEach(function(e){var t=y[e.type];(Array.isArray(t)?t:[t]).forEach(function(t){"DID_INIT_ITEM"===e.type?D(t(e.data)):setTimeout(function(){D(t(e.data))},0)})})},A=function(e){return new Promise(function(t,n){l.dispatch("REQUEST_ITEM_PREPARE",{query:e,success:function(e){t(e)},failure:function(e){n(e)}})})},P=function(e,t){var n;return"object"!=typeof e||(n=e).file&&n.id||t||(t=e,e=void 0),l.dispatch("REMOVE_ITEM",Object.assign({},t,{query:e})),null===l.query("GET_ACTIVE_ITEM",e)},L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise(function(e,n){var r=[],o={};if(B(t[0]))r.push.apply(r,t[0]),Object.assign(o,t[1]||{});else{var c=t[t.length-1];"object"!=typeof c||c instanceof Blob||Object.assign(o,t.pop()),r.push.apply(r,t)}l.dispatch("ADD_ITEMS",{items:r,index:o.index,interactionMethod:se.API,success:e,failure:n})})},M=function(){return l.query("GET_ACTIVE_ITEMS")},w=function(e){return new Promise(function(t,n){l.dispatch("REQUEST_ITEM_PROCESSING",{query:e,success:function(e){t(e)},failure:function(e){n(e)}})})},C=Object.assign({},Ie(),{},R,{},function(e,n){var r={};return t(n,function(t){r[t]={get:function(){return e.getState().options[t]},set:function(n){e.dispatch("SET_"+oe(t,"_").toUpperCase(),{value:n})}}}),r}(l,o),{setOptions:function(e){return l.dispatch("SET_OPTIONS",{options:e})},addFile:function(source){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(t,n){L([{source:source,options:e}],{index:e.index}).then(function(e){return t(e&&e[0])}).catch(n)})},addFiles:L,getFile:function(e){return l.query("GET_ACTIVE_ITEM",e)},processFile:w,prepareFile:A,removeFile:P,moveFile:function(e,t){return l.dispatch("MOVE_ITEM",{query:e,index:t})},getFiles:M,processFiles:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Array.isArray(t[0])?t[0]:t;if(!r.length){var o=M().filter(function(e){return!(e.status===Re.IDLE&&e.origin===Oe.LOCAL)&&e.status!==Re.PROCESSING&&e.status!==Re.PROCESSING_COMPLETE&&e.status!==Re.PROCESSING_REVERT_ERROR});return Promise.all(o.map(w))}return Promise.all(r.map(w))},removeFiles:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=Array.isArray(t[0])?t[0]:t;"object"==typeof o[o.length-1]?r=o.pop():Array.isArray(t[0])&&(r=t[1]);var l=M();return o.length?o.map(function(e){return h(e)?l[e]?l[e].id:null:e}).filter(function(e){return e}).map(function(q){return P(q,r)}):Promise.all(l.map(function(e){return P(e,r)}))},prepareFiles:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Array.isArray(t[0])?t[0]:t,o=r.length?r:M();return Promise.all(o.map(A))},sort:function(e){return l.dispatch("SORT",{compare:e})},browse:function(){var input=view.element.querySelector("input[type=file]");input&&input.click()},destroy:function(){C.fire("destroy",view.element),l.dispatch("ABORT_ALL"),view._destroy(),window.removeEventListener("resize",v),document.removeEventListener("visibilitychange",c),l.dispatch("DID_DESTROY")},insertBefore:function(element){return G(view.element,element)},insertAfter:function(element){return U(view.element,element)},appendTo:function(element){return element.appendChild(view.element)},replaceElement:function(element){G(view.element,element),element.parentNode.removeChild(element),r=element},restoreElement:function(){r&&(U(r,view.element),view.element.parentNode.removeChild(view.element),r=null)},isAttachedTo:function(element){return view.element===element||r===element},element:{get:function(){return view.element}},status:{get:function(){return l.query("GET_STATUS")}}});return l.dispatch("DID_INIT"),n(C)},Zr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};t(Me(),function(e,t){n[e]=t[0]});var r=$r(Object.assign({},n,{},e));return r},Kr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[];t(e.attributes,function(t){o.push(e.attributes[t])});var output=o.filter(function(e){return e.name}).reduce(function(t,n){var o,l=r(e,n.name);return t[(o=n.name,Br(o.replace(/^data-/,"")))]=l===n.name||l,t},{});return function e(object,n){t(n,function(n,r){t(object,function(e,t){var o=new RegExp(n),l=o.test(e);if(l&&(delete object[e],!1!==r))if(k(r))object[r]=t;else{var c,f=r.group;J(r)&&!object[f]&&(object[f]={}),object[f][(c=e.replace(o,""),c.charAt(0).toLowerCase()+c.slice(1))]=t}}),r.mapping&&e(object[r.group],r.mapping)})}(output,n),output},Jr=function(){return(arguments.length<=0?void 0:arguments[0])instanceof HTMLElement?function(element){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Pe("SET_ATTRIBUTE_TO_OPTION_MAP",t);var n=Object.assign({},e),r=Kr("FIELDSET"===element.nodeName?element.querySelector("input[type=file]"):element,t);Object.keys(r).forEach(function(e){J(r[e])?(J(n[e])||(n[e]={}),Object.assign(n[e],r[e])):n[e]=r[e]}),n.files=(e.files||[]).concat(Array.from(element.querySelectorAll("input:not([type=file])")).map(function(input){return{source:input.value,options:{type:input.dataset.type}}}));var o=Zr(n);return element.files&&Array.from(element.files).forEach(function(e){o.addFile(e)}),o.replaceElement(element),o}.apply(void 0,arguments):Zr.apply(void 0,arguments)},eo=["fire","_read","_write"],to=function(e){var t={};return me(e,t,eo),t},no=function(e,t){return e.replace(/(?:{([a-zA-Z]+)})/g,function(e,n){return t[n]})},ro=function(e){var t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:function(e,t){},post:function(e,t,n){var o=ue();r.onmessage=function(e){e.data.id===o&&t(e.data.message)},r.postMessage({id:o,message:e},n)},terminate:function(){r.terminate(),URL.revokeObjectURL(n)}}},oo=function(e){return new Promise(function(t,n){var img=new Image;img.onload=function(){t(img)},img.onerror=function(e){n(e)},img.src=e})},io=function(e,t){var n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},ao=function(e){return io(e,e.name)},so=[],uo=function(e){if(!so.includes(e)){so.push(e);var n,r=e({addFilter:Le,utils:{Type:Se,forin:t,isString:k,isFile:gt,toNaturalFileSize:qt,replaceInString:no,getExtensionFromFilename:We,getFilenameWithoutExtension:ht,guesstimateMimeType:Qn,getFileFromBlob:$e,getFilenameFromURL:Xe,createRoute:N,createWorker:ro,createView:C,createItemAPI:ge,loadImage:oo,copyFile:ao,renameFile:io,createBlob:Ze,applyFilterChain:be,text:text,getNumericAspectRatioFromString:Ne},views:{fileActionButton:Bt}});n=r.options,Object.assign(we,n)}},lo=($t=_()&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window&&("supports"in(window.CSS||{})||/MSIE|Trident/.test(window.navigator.userAgent)),function(){return $t}),co={apps:[]},fo=function(){};if(e.Status={},e.FileStatus={},e.FileOrigin={},e.OptionTypes={},e.create=fo,e.destroy=fo,e.parse=fo,e.find=fo,e.registerPlugin=fo,e.getOptions=fo,e.setOptions=fo,lo()){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,r="__framePainter";if(window[r])return window[r].readers.push(e),void window[r].writers.push(t);window[r]={readers:[e],writers:[t]};var o=window[r],l=1e3/n,c=null,f=null,d=null,E=null,_=function(){document.hidden?(d=function(){return window.setTimeout(function(){return T(performance.now())},l)},E=function(){return window.clearTimeout(f)}):(d=function(){return window.requestAnimationFrame(T)},E=function(){return window.cancelAnimationFrame(f)})};document.addEventListener("visibilitychange",function(){E&&E(),_(),T(performance.now())});var T=function e(t){f=d(e),c||(c=t);var n=t-c;n<=l||(c=t-n%l,o.readers.forEach(function(e){return e()}),o.writers.forEach(function(e){return e(t)}))};_(),T(performance.now())}(function(){co.apps.forEach(function(e){return e._read()})},function(e){co.apps.forEach(function(t){return t._write(e)})});var po=function t(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:lo,create:e.create,destroy:e.destroy,parse:e.parse,find:e.find,registerPlugin:e.registerPlugin,setOptions:e.setOptions}})),document.removeEventListener("DOMContentLoaded",t)};"loading"!==document.readyState?setTimeout(function(){return po()},0):document.addEventListener("DOMContentLoaded",po);var Eo=function(){return t(Me(),function(t,n){e.OptionTypes[t]=n[1]})};e.Status=Object.assign({},Ue),e.FileOrigin=Object.assign({},Oe),e.FileStatus=Object.assign({},Re),e.OptionTypes={},Eo(),e.create=function(){var t=Jr.apply(void 0,arguments);return t.on("destroy",e.destroy),co.apps.push(t),to(t)},e.destroy=function(e){var t=co.apps.findIndex(function(t){return t.isAttachedTo(e)});if(t>=0){var n=co.apps.splice(t,1)[0];return n.restoreElement(),!0}return!1},e.parse=function(t){var n=Array.from(t.querySelectorAll(".filepond")),r=n.filter(function(e){return!co.apps.find(function(t){return t.isAttachedTo(e)})});return r.map(function(t){return e.create(t)})},e.find=function(e){var t=co.apps.find(function(t){return t.isAttachedTo(e)});return t?to(t):null},e.registerPlugin=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(uo),Eo()},e.getOptions=function(){var e={};return t(Me(),function(t,n){e[t]=n[0]}),e},e.setOptions=function(n){return J(n)&&(co.apps.forEach(function(e){e.setOptions(n)}),function(e){t(e,function(e,t){we[e]&&(we[e][0]=ne(t,we[e][0],we[e][1]))})}(n)),e.getOptions()}}e.supported=lo,Object.defineProperty(e,"__esModule",{value:!0})}(t)}}]);